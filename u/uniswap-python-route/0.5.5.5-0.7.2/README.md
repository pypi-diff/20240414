# Comparing `tmp/uniswap_python_route-0.5.5.5.tar.gz` & `tmp/uniswap_python_route-0.7.2.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "uniswap_python_route-0.5.5.5.tar", max compression
+gzip compressed data, was "uniswap_python_route-0.7.2.tar", max compression
```

## Comparing `uniswap_python_route-0.5.5.5.tar` & `uniswap_python_route-0.7.2.tar`

### file list

```diff
@@ -1,26 +1,28 @@
--rw-r--r--   0        0        0     1080 2023-04-10 21:36:25.290516 uniswap_python_route-0.5.5.5/LICENSE
--rw-r--r--   0        0        0     5504 2023-04-10 21:36:25.290726 uniswap_python_route-0.5.5.5/README.md
--rw-r--r--   0        0        0     1253 2023-04-24 20:23:54.164872 uniswap_python_route-0.5.5.5/pyproject.toml
--rw-r--r--   0        0        0       90 2023-04-10 21:36:25.293632 uniswap_python_route-0.5.5.5/uniswap/__init__.py
--rw-r--r--   0        0        0     4376 2023-04-10 21:36:25.293775 uniswap_python_route-0.5.5.5/uniswap/assets/erc20.abi
--rw-r--r--   0        0        0     4378 2023-04-10 21:36:25.293849 uniswap_python_route-0.5.5.5/uniswap/assets/erc20b32.abi
--rw-r--r--   0        0        0    17154 2023-04-10 21:36:25.294013 uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v1/exchange.abi
--rw-r--r--   0        0        0     1761 2023-04-10 21:36:25.294112 uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v1/factory.abi
--rw-r--r--   0        0        0     3347 2023-04-10 21:36:25.294254 uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v2/factory.abi
--rw-r--r--   0        0        0    15309 2023-04-10 21:36:25.294360 uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v2/router02.abi
--rw-r--r--   0        0        0     4418 2023-04-10 21:36:25.294456 uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v3/factory.abi
--rw-r--r--   0        0        0    19609 2023-04-10 21:36:25.294552 uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v3/pool.abi
--rw-r--r--   0        0        0     2988 2023-04-10 21:36:25.294658 uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v3/quoter.abi
--rw-r--r--   0        0        0     9265 2023-04-10 21:36:25.294728 uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v3/router.abi
--rw-r--r--   0        0        0     3229 2023-04-10 21:36:25.294817 uniswap_python_route-0.5.5.5/uniswap/cli.py
--rw-r--r--   0        0        0     2242 2023-04-10 21:36:25.294892 uniswap_python_route-0.5.5.5/uniswap/constants.py
--rw-r--r--   0        0        0     1760 2023-04-10 21:36:25.294970 uniswap_python_route-0.5.5.5/uniswap/decorators.py
--rw-r--r--   0        0        0      489 2023-04-10 21:36:25.295049 uniswap_python_route-0.5.5.5/uniswap/exceptions.py
--rw-r--r--   0        0        0        0 2023-04-10 21:36:25.295079 uniswap_python_route-0.5.5.5/uniswap/py.typed
--rw-r--r--   0        0        0      677 2023-04-10 21:36:25.295156 uniswap_python_route-0.5.5.5/uniswap/token.py
--rw-r--r--   0        0        0      922 2023-04-10 21:36:25.295224 uniswap_python_route-0.5.5.5/uniswap/tokens.py
--rw-r--r--   0        0        0      165 2023-04-10 21:36:25.295303 uniswap_python_route-0.5.5.5/uniswap/types.py
--rw-r--r--   0        0        0    56428 2023-04-24 20:22:29.685122 uniswap_python_route-0.5.5.5/uniswap/uniswap.py
--rw-r--r--   0        0        0     1893 2023-04-10 21:36:25.295609 uniswap_python_route-0.5.5.5/uniswap/util.py
--rw-r--r--   0        0        0     6666 1970-01-01 00:00:00.000000 uniswap_python_route-0.5.5.5/setup.py
--rw-r--r--   0        0        0     6615 1970-01-01 00:00:00.000000 uniswap_python_route-0.5.5.5/PKG-INFO
+-rw-r--r--   0        0        0     1080 2024-04-14 16:25:35.299708 uniswap_python_route-0.7.2/LICENSE
+-rw-r--r--   0        0        0     6492 2024-04-14 16:31:03.090359 uniswap_python_route-0.7.2/README.md
+-rw-r--r--   0        0        0     1457 2024-04-14 16:31:25.249405 uniswap_python_route-0.7.2/pyproject.toml
+-rw-r--r--   0        0        0      151 2024-04-14 16:31:03.093782 uniswap_python_route-0.7.2/uniswap/__init__.py
+-rw-r--r--   0        0        0     4376 2024-04-14 16:25:35.302940 uniswap_python_route-0.7.2/uniswap/assets/erc20.abi
+-rw-r--r--   0        0        0     4378 2024-04-14 16:25:35.303014 uniswap_python_route-0.7.2/uniswap/assets/erc20b32.abi
+-rw-r--r--   0        0        0    17154 2024-04-14 16:25:35.303124 uniswap_python_route-0.7.2/uniswap/assets/uniswap-v1/exchange.abi
+-rw-r--r--   0        0        0     1761 2024-04-14 16:25:35.303214 uniswap_python_route-0.7.2/uniswap/assets/uniswap-v1/factory.abi
+-rw-r--r--   0        0        0     3347 2024-04-14 16:25:35.303327 uniswap_python_route-0.7.2/uniswap/assets/uniswap-v2/factory.abi
+-rw-r--r--   0        0        0    15309 2024-04-14 16:25:35.303433 uniswap_python_route-0.7.2/uniswap/assets/uniswap-v2/router02.abi
+-rw-r--r--   0        0        0     4418 2024-04-14 16:25:35.303541 uniswap_python_route-0.7.2/uniswap/assets/uniswap-v3/factory.abi
+-rw-r--r--   0        0        0     6437 2024-04-14 16:31:03.093919 uniswap_python_route-0.7.2/uniswap/assets/uniswap-v3/multicall.abi
+-rw-r--r--   0        0        0    24314 2024-04-14 16:31:03.094025 uniswap_python_route-0.7.2/uniswap/assets/uniswap-v3/nonFungiblePositionManager.abi
+-rw-r--r--   0        0        0    19609 2024-04-14 16:25:35.303621 uniswap_python_route-0.7.2/uniswap/assets/uniswap-v3/pool.abi
+-rw-r--r--   0        0        0     2988 2024-04-14 16:25:35.303698 uniswap_python_route-0.7.2/uniswap/assets/uniswap-v3/quoter.abi
+-rw-r--r--   0        0        0     9265 2024-04-14 16:25:35.303801 uniswap_python_route-0.7.2/uniswap/assets/uniswap-v3/router.abi
+-rw-r--r--   0        0        0     3522 2024-04-14 16:31:03.094250 uniswap_python_route-0.7.2/uniswap/cli.py
+-rw-r--r--   0        0        0     3256 2024-04-14 16:31:03.094392 uniswap_python_route-0.7.2/uniswap/constants.py
+-rw-r--r--   0        0        0     2206 2024-04-14 16:31:03.094529 uniswap_python_route-0.7.2/uniswap/decorators.py
+-rw-r--r--   0        0        0      600 2024-04-14 16:31:03.094654 uniswap_python_route-0.7.2/uniswap/exceptions.py
+-rw-r--r--   0        0        0     1522 2024-04-14 16:31:03.094764 uniswap_python_route-0.7.2/uniswap/fee.py
+-rw-r--r--   0        0        0        0 2024-04-14 16:25:35.304128 uniswap_python_route-0.7.2/uniswap/py.typed
+-rw-r--r--   0        0        0      678 2024-04-14 16:31:03.094892 uniswap_python_route-0.7.2/uniswap/token.py
+-rw-r--r--   0        0        0     1772 2024-04-14 16:31:03.095028 uniswap_python_route-0.7.2/uniswap/tokens.py
+-rw-r--r--   0        0        0      125 2024-04-14 16:31:03.095177 uniswap_python_route-0.7.2/uniswap/types.py
+-rw-r--r--   0        0        0    77920 2024-04-14 16:31:03.096012 uniswap_python_route-0.7.2/uniswap/uniswap.py
+-rw-r--r--   0        0        0     4484 2024-04-14 16:31:03.096988 uniswap_python_route-0.7.2/uniswap/util.py
+-rw-r--r--   0        0        0     7680 1970-01-01 00:00:00.000000 uniswap_python_route-0.7.2/PKG-INFO
```

### Comparing `uniswap_python_route-0.5.5.5/LICENSE` & `uniswap_python_route-0.7.2/LICENSE`

 * *Files identical despite different names*

### Comparing `uniswap_python_route-0.5.5.5/README.md` & `uniswap_python_route-0.7.2/README.md`

 * *Files 11% similar despite different names*

```diff
@@ -59,286 +59,348 @@
 000003a0: 672f 290a 5b21 5b43 6f64 6520 7374 796c  g/).[![Code styl
 000003b0: 653a 2062 6c61 636b 5d28 6874 7470 733a  e: black](https:
 000003c0: 2f2f 696d 672e 7368 6965 6c64 732e 696f  //img.shields.io
 000003d0: 2f62 6164 6765 2f63 6f64 6525 3230 7374  /badge/code%20st
 000003e0: 796c 652d 626c 6163 6b2d 3030 3030 3030  yle-black-000000
 000003f0: 2e73 7667 295d 2868 7474 7073 3a2f 2f67  .svg)](https://g
 00000400: 6974 6875 622e 636f 6d2f 616d 6276 2f62  ithub.com/ambv/b
-00000410: 6c61 636b 290a 0a5b 215b 4769 7448 7562  lack)..[![GitHub
-00000420: 2052 6570 6f20 7374 6172 735d 2868 7474   Repo stars](htt
-00000430: 7073 3a2f 2f69 6d67 2e73 6869 656c 6473  ps://img.shields
-00000440: 2e69 6f2f 6769 7468 7562 2f73 7461 7273  .io/github/stars
-00000450: 2f75 6e69 7377 6170 2d70 7974 686f 6e2f  /uniswap-python/
-00000460: 756e 6973 7761 702d 7079 7468 6f6e 3f73  uniswap-python?s
-00000470: 7479 6c65 3d73 6f63 6961 6c29 5d28 6874  tyle=social)](ht
-00000480: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
-00000490: 2f75 6e69 7377 6170 2d70 7974 686f 6e2f  /uniswap-python/
-000004a0: 756e 6973 7761 702d 7079 7468 6f6e 2f73  uniswap-python/s
-000004b0: 7461 7267 617a 6572 7329 0a5b 215b 5477  targazers).[![Tw
-000004c0: 6974 7465 7220 466f 6c6c 6f77 5d28 6874  itter Follow](ht
-000004d0: 7470 733a 2f2f 696d 672e 7368 6965 6c64  tps://img.shield
-000004e0: 732e 696f 2f74 7769 7474 6572 2f66 6f6c  s.io/twitter/fol
-000004f0: 6c6f 772f 556e 6973 7761 7050 7974 686f  low/UniswapPytho
-00000500: 6e3f 6c61 6265 6c3d 466f 6c6c 6f77 2673  n?label=Follow&s
-00000510: 7479 6c65 3d73 6f63 6961 6c29 5d28 6874  tyle=social)](ht
-00000520: 7470 733a 2f2f 7477 6974 7465 722e 636f  tps://twitter.co
-00000530: 6d2f 556e 6973 7761 7050 7974 686f 6e29  m/UniswapPython)
-00000540: 0a0a 5468 6520 756e 6f66 6669 6369 616c  ..The unofficial
-00000550: 2050 7974 686f 6e20 636c 6965 6e74 2066   Python client f
-00000560: 6f72 205b 556e 6973 7761 705d 2868 7474  or [Uniswap](htt
-00000570: 7073 3a2f 2f75 6e69 7377 6170 2e69 6f2f  ps://uniswap.io/
-00000580: 292e 0a0a 446f 6375 6d65 6e74 6174 696f  )...Documentatio
-00000590: 6e20 6973 2061 7661 696c 6162 6c65 2061  n is available a
-000005a0: 7420 6874 7470 733a 2f2f 756e 6973 7761  t https://uniswa
-000005b0: 702d 7079 7468 6f6e 2e63 6f6d 2f0a 0a23  p-python.com/..#
-000005c0: 2320 4675 6e63 7469 6f6e 616c 6974 790a  # Functionality.
-000005d0: 0a2a 2020 4120 7369 6d70 6c65 2074 6f20  .*  A simple to 
-000005e0: 7573 6520 5079 7468 6f6e 2077 7261 7070  use Python wrapp
-000005f0: 6572 2066 6f72 2061 6c6c 2061 7661 696c  er for all avail
-00000600: 6162 6c65 2063 6f6e 7472 6163 7420 6675  able contract fu
-00000610: 6e63 7469 6f6e 7320 616e 6420 7661 7269  nctions and vari
-00000620: 6162 6c65 730a 2a20 2041 2062 6173 6963  ables.*  A basic
-00000630: 2043 4c49 2074 6f20 6765 7420 7072 6963   CLI to get pric
-00000640: 6573 2061 6e64 2074 6f6b 656e 206d 6574  es and token met
-00000650: 6164 6174 610a 2a20 2053 696d 706c 6520  adata.*  Simple 
-00000660: 7061 7273 696e 6720 6f66 2064 6174 6120  parsing of data 
-00000670: 7265 7475 726e 6564 2066 726f 6d20 7468  returned from th
-00000680: 6520 556e 6973 7761 7020 636f 6e74 7261  e Uniswap contra
-00000690: 6374 0a0a 2323 2320 5375 7070 6f72 7473  ct..### Supports
-000006a0: 0a0a 202d 2055 6e69 7377 6170 2076 3320  .. - Uniswap v3 
-000006b0: 2861 7320 6f66 2076 302e 352e 3029 0a20  (as of v0.5.0). 
-000006c0: 2020 202d 2049 6e63 6c75 6469 6e67 2062     - Including b
-000006d0: 6574 6120 7375 7070 6f72 7420 666f 7220  eta support for 
-000006e0: 4172 6269 7472 756d 2026 204f 7074 696d  Arbitrum & Optim
-000006f0: 6973 6d20 6465 706c 6f79 6d65 6e74 7320  ism deployments 
-00000700: 2861 7320 6f66 2076 302e 352e 3429 0a20  (as of v0.5.4). 
-00000710: 2d20 556e 6973 7761 7020 7632 2028 6173  - Uniswap v2 (as
-00000720: 206f 6620 7630 2e34 2e30 290a 202d 2055   of v0.4.0). - U
-00000730: 6e69 7377 6170 2076 3120 2864 6570 7265  niswap v1 (depre
-00000740: 6361 7465 6429 0a20 2d20 5661 7269 6f75  cated). - Variou
-00000750: 7320 666f 726b 7320 2875 6e74 6573 7465  s forks (unteste
-00000760: 642c 2062 7574 2073 686f 756c 6420 776f  d, but should wo
-00000770: 726b 290a 2020 202d 2048 6f6e 6579 7377  rk).   - Honeysw
-00000780: 6170 2028 7844 6169 290a 2020 202d 2050  ap (xDai).   - P
-00000790: 616e 6361 6b65 7377 6170 2028 4253 4329  ancakeswap (BSC)
-000007a0: 0a20 2020 2d20 5375 7368 6973 7761 7020  .   - Sushiswap 
-000007b0: 286d 6169 6e6e 6574 290a 0a23 2320 4765  (mainnet)..## Ge
-000007c0: 7474 696e 6720 5374 6172 7465 640a 0a53  tting Started..S
-000007d0: 6565 206f 7572 205b 4765 7474 696e 6720  ee our [Getting 
-000007e0: 7374 6172 7465 6420 6775 6964 655d 2868  started guide](h
-000007f0: 7474 7073 3a2f 2f75 6e69 7377 6170 2d70  ttps://uniswap-p
-00000800: 7974 686f 6e2e 636f 6d2f 6765 7474 696e  ython.com/gettin
-00000810: 672d 7374 6172 7465 642e 6874 6d6c 2920  g-started.html) 
-00000820: 696e 2074 6865 2064 6f63 756d 656e 7461  in the documenta
-00000830: 7469 6f6e 2e0a 0a23 2320 5465 7374 696e  tion...## Testin
-00000840: 670a 0a55 6e69 7420 7465 7374 7320 6172  g..Unit tests ar
-00000850: 6520 756e 6465 7220 6465 7665 6c6f 706d  e under developm
-00000860: 656e 7420 7573 696e 6720 7468 6520 7079  ent using the py
-00000870: 7465 7374 2066 7261 6d65 776f 726b 2e20  test framework. 
-00000880: 436f 6e74 7269 6275 7469 6f6e 7320 6172  Contributions ar
-00000890: 6520 7765 6c63 6f6d 6521 0a0a 5465 7374  e welcome!..Test
-000008a0: 2061 7265 2072 756e 206f 6e20 6120 666f   are run on a fo
-000008b0: 726b 206f 6620 7468 6520 6d61 696e 206e  rk of the main n
-000008c0: 6574 2075 7369 6e67 2067 616e 6163 6865  et using ganache
-000008d0: 2d63 6c69 2e20 596f 7520 6e65 6564 2074  -cli. You need t
-000008e0: 6f20 696e 7374 616c 6c20 6974 2077 6974  o install it wit
-000008f0: 6820 606e 706d 2069 6e73 7461 6c6c 202d  h `npm install -
-00000900: 6720 6761 6e61 6368 652d 636c 6960 2062  g ganache-cli` b
-00000910: 6566 6f72 6520 7275 6e6e 696e 6720 7465  efore running te
-00000920: 7374 732e 0a0a 546f 2072 756e 2074 6865  sts...To run the
-00000930: 2066 756c 6c20 7465 7374 2073 7569 7465   full test suite
-00000940: 2c20 696e 2074 6865 2070 726f 6a65 6374  , in the project
-00000950: 2064 6972 6563 746f 7279 2073 6574 2074   directory set t
-00000960: 6865 2060 5052 4f56 4944 4552 6020 656e  he `PROVIDER` en
-00000970: 7620 7661 7269 6162 6c65 2074 6f20 6120  v variable to a 
-00000980: 6d61 696e 6e65 7420 7072 6f76 6964 6572  mainnet provider
-00000990: 2c20 616e 6420 7275 6e3a 0a0a 6060 6073  , and run:..```s
-000009a0: 680a 706f 6574 7279 2069 6e73 7461 6c6c  h.poetry install
-000009b0: 0a65 7870 6f72 7420 5052 4f56 4944 4552  .export PROVIDER
-000009c0: 3d20 2320 5552 4c20 6f66 2070 726f 7669  = # URL of provi
-000009d0: 6465 722c 2065 2e67 2e20 6874 7470 733a  der, e.g. https:
-000009e0: 2f2f 6d61 696e 6e65 742e 696e 6675 7261  //mainnet.infura
-000009f0: 2e69 6f2f 7633 2f2e 2e2e 0a6d 616b 6520  .io/v3/....make 
-00000a00: 7465 7374 0a23 206f 722e 2e2e 0a70 6f65  test.# or....poe
-00000a10: 7472 7920 7275 6e20 7079 7465 7374 202d  try run pytest -
-00000a20: 2d63 6170 7475 7265 3d6e 6f20 2023 2064  -capture=no  # d
-00000a30: 6f65 736e 2774 2063 6170 7475 7265 206f  oesn't capture o
-00000a40: 7574 7075 7420 2876 6572 626f 7365 290a  utput (verbose).
-00000a50: 6060 600a 0a23 2320 5375 7070 6f72 7420  ```..## Support 
-00000a60: 6f75 7220 636f 6e74 696e 7565 6420 776f  our continued wo
-00000a70: 726b 210a 0a59 6f75 2063 616e 2073 7570  rk!..You can sup
-00000a80: 706f 7274 2075 7320 6f6e 205b 4769 7463  port us on [Gitc
-00000a90: 6f69 6e20 4772 616e 7473 5d28 6874 7470  oin Grants](http
-00000aa0: 733a 2f2f 6769 7463 6f69 6e2e 636f 2f67  s://gitcoin.co/g
-00000ab0: 7261 6e74 732f 3236 3331 2f75 6e69 7377  rants/2631/unisw
-00000ac0: 6170 2d70 7974 686f 6e29 2e0a 0a23 2320  ap-python)...## 
-00000ad0: 4175 7468 6f72 730a 0a2a 205b 5368 616e  Authors..* [Shan
-00000ae0: 6520 466f 6e74 6169 6e65 5d28 6874 7470  e Fontaine](http
-00000af0: 733a 2f2f 7477 6974 7465 722e 636f 6d2f  s://twitter.com/
-00000b00: 7368 616e 6563 6f69 6e29 0a2a 205b 4572  shanecoin).* [Er
-00000b10: 696b 2042 6ac3 a472 6568 6f6c 745d 2868  ik Bj..reholt](h
-00000b20: 7474 7073 3a2f 2f74 7769 7474 6572 2e63  ttps://twitter.c
-00000b30: 6f6d 2f45 7269 6b42 6a61 7265 290a 2a20  om/ErikBjare).* 
-00000b40: 5b40 6c69 7175 6964 2d38 5d28 6874 7470  [@liquid-8](http
-00000b50: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f6c  s://github.com/l
-00000b60: 6971 7569 642d 3829 0a2a 202e 2e2e 616e  iquid-8).* ...an
-00000b70: 6420 5b6f 7468 6572 735d 2868 7474 7073  d [others](https
-00000b80: 3a2f 2f67 6974 6875 622e 636f 6d2f 756e  ://github.com/un
-00000b90: 6973 7761 702d 7079 7468 6f6e 2f75 6e69  iswap-python/uni
-00000ba0: 7377 6170 2d70 7974 686f 6e2f 6772 6170  swap-python/grap
-00000bb0: 6873 2f63 6f6e 7472 6962 7574 6f72 7329  hs/contributors)
-00000bc0: 0a0a 2a57 616e 7420 746f 2068 656c 7020  ..*Want to help 
-00000bd0: 6f75 7420 7769 7468 2064 6576 656c 6f70  out with develop
-00000be0: 6d65 6e74 3f20 5765 2068 6176 6520 6675  ment? We have fu
-00000bf0: 6e64 696e 6720 746f 2074 686f 7365 2074  nding to those t
-00000c00: 6861 7420 646f 2120 5365 6520 5b23 3138  hat do! See [#18
-00000c10: 315d 2868 7474 7073 3a2f 2f67 6974 6875  1](https://githu
-00000c20: 622e 636f 6d2f 756e 6973 7761 702d 7079  b.com/uniswap-py
-00000c30: 7468 6f6e 2f75 6e69 7377 6170 2d70 7974  thon/uniswap-pyt
-00000c40: 686f 6e2f 6469 7363 7573 7369 6f6e 732f  hon/discussions/
-00000c50: 3138 3129 2a0a 0a23 2320 4368 616e 6765  181)*..## Change
-00000c60: 6c6f 670a 0a5f 302e 352e 345f 0a0a 2a20  log.._0.5.4_..* 
-00000c70: 6164 6465 6420 7573 6520 6f66 2067 6173  added use of gas
-00000c80: 2065 7374 696d 6174 696f 6e20 696e 7374   estimation inst
-00000c90: 6561 6420 6f66 2061 2066 6978 6564 2067  ead of a fixed g
-00000ca0: 6173 206c 696d 6974 2028 746f 2073 7570  as limit (to sup
-00000cb0: 706f 7274 2041 7262 6974 7275 6d29 0a2a  port Arbitrum).*
-00000cc0: 2061 6464 6564 2060 7573 655f 6573 7469   added `use_esti
-00000cd0: 6d61 7465 5f67 6173 6020 636f 6e73 7472  mate_gas` constr
-00000ce0: 7563 746f 7220 6172 6775 6d65 6e74 2028  uctor argument (
-00000cf0: 7573 6564 2069 6e20 7465 7374 696e 6729  used in testing)
-00000d00: 0a2a 2061 6464 6564 2063 6f6e 7374 616e  .* added constan
-00000d10: 7473 2f62 6173 6963 2073 7570 706f 7274  ts/basic support
-00000d20: 2066 6f72 2041 7262 6974 7275 6d2c 204f   for Arbitrum, O
-00000d30: 7074 696d 6973 6d2c 2050 6f6c 7967 6f6e  ptimism, Polygon
-00000d40: 2c20 616e 6420 4661 6e74 6f6d 2e20 2875  , and Fantom. (u
-00000d50: 6e74 6573 7465 6429 0a2a 2069 6e63 6f6d  ntested).* incom
-00000d60: 706c 6574 6520 6368 616e 6765 6c6f 670a  plete changelog.
-00000d70: 0a5f 302e 352e 335f 0a0a 2a20 696e 636f  ._0.5.3_..* inco
-00000d80: 6d70 6c65 7465 2063 6861 6e67 656c 6f67  mplete changelog
-00000d90: 0a0a 5f30 2e35 2e32 5f0a 0a2a 2069 6e63  .._0.5.2_..* inc
-00000da0: 6f6d 706c 6574 6520 6368 616e 6765 6c6f  omplete changelo
-00000db0: 670a 0a5f 302e 352e 315f 0a0a 2a20 5570  g.._0.5.1_..* Up
-00000dc0: 6461 7465 6420 6465 7065 6e64 656e 6369  dated dependenci
-00000dd0: 6573 0a2a 2046 6978 6564 206d 696e 6f72  es.* Fixed minor
-00000de0: 2074 7970 696e 6720 6973 7375 6573 0a0a   typing issues..
-00000df0: 5f30 2e35 2e30 5f0a 0a2a 2042 6173 6963  _0.5.0_..* Basic
-00000e00: 2073 7570 706f 7274 2066 6f72 2055 6e69   support for Uni
-00000e10: 7377 6170 2056 330a 2a20 4164 6465 6420  swap V3.* Added 
-00000e20: 6e65 7720 6d65 7468 6f64 7320 6067 6574  new methods `get
-00000e30: 5f70 7269 6365 5f69 6e70 7574 6020 616e  _price_input` an
-00000e40: 6420 6067 6574 5f70 7269 6365 5f6f 7574  d `get_price_out
-00000e50: 7075 7460 0a2a 204d 6164 6520 6120 6c6f  put`.* Made a lo
-00000e60: 7420 6f66 2070 7265 7669 6f75 736c 7920  t of previously 
-00000e70: 7075 626c 6963 206d 6574 686f 6473 2070  public methods p
-00000e80: 7269 7661 7465 0a2a 2041 6464 6564 2064  rivate.* Added d
-00000e90: 6f63 756d 656e 7461 7469 6f6e 2073 6974  ocumentation sit
-00000ea0: 650a 2a20 5265 6d6f 7665 6420 454e 5320  e.* Removed ENS 
-00000eb0: 7375 7070 6f72 7420 2877 6869 6368 2077  support (which w
-00000ec0: 6173 2070 726f 6261 626c 7920 6272 6f6b  as probably brok
-00000ed0: 656e 2074 6f20 6265 6769 6e20 7769 7468  en to begin with
-00000ee0: 290a 0a5f 302e 342e 365f 0a0a 2a20 4275  ).._0.4.6_..* Bu
-00000ef0: 6720 6669 783a 2055 7064 6174 6520 626c  g fix: Update bl
-00000f00: 6561 6368 2070 6163 6b61 6765 2066 726f  each package fro
-00000f10: 6d20 332e 312e 3420 746f 2033 2e33 2e30  m 3.1.4 to 3.3.0
-00000f20: 0a0a 5f30 2e34 2e35 5f0a 2a20 4275 6720  .._0.4.5_.* Bug 
-00000f30: 6669 783a 2055 7365 202e 6574 6820 696e  fix: Use .eth in
-00000f40: 7374 6561 6420 6f66 202e 656e 730a 0a5f  stead of .ens.._
-00000f50: 302e 342e 345f 0a0a 2a20 4765 6e65 7261  0.4.4_..* Genera
-00000f60: 6c3a 2041 6464 206e 6577 206c 6f67 6f20  l: Add new logo 
-00000f70: 666f 7220 556e 6973 7761 7020 5632 0a2a  for Uniswap V2.*
-00000f80: 2042 7567 2066 6978 3a20 496e 7661 6c69   Bug fix: Invali
-00000f90: 6420 6261 6c61 6e63 6520 6368 6563 6b20  d balance check 
-00000fa0: 2823 3235 290a 2a20 4275 6720 6669 783a  (#25).* Bug fix:
-00000fb0: 2046 6978 6564 2065 7272 6f72 2077 6865   Fixed error whe
-00000fc0: 6e20 7061 7373 696e 6720 5745 5448 2061  n passing WETH a
-00000fd0: 7320 746f 6b65 6e0a 0a5f 302e 342e 335f  s token.._0.4.3_
-00000fe0: 0a0a 2a20 416c 6c6f 7720 6b77 6172 6773  ..* Allow kwargs
-00000ff0: 2069 6e20 6061 7070 726f 7665 6460 2064   in `approved` d
-00001000: 6563 6f72 6174 6f72 2e0a 0a5f 302e 342e  ecorator..._0.4.
-00001010: 325f 0a0a 2a20 4164 6420 6e6f 7465 2061  2_..* Add note a
-00001020: 626f 7574 2055 6e69 7377 6170 2056 3220  bout Uniswap V2 
-00001030: 7375 7070 6f72 740a 0a5f 302e 342e 315f  support.._0.4.1_
-00001040: 0a0a 2a20 5570 6461 7465 2063 6861 6e67  ..* Update chang
-00001050: 656c 6f67 2066 6f72 2050 7950 6920 616e  elog for PyPi an
-00001060: 6420 636c 6561 6e20 7570 0a0a 5f30 2e34  d clean up.._0.4
-00001070: 2e30 5f0a 0a5f 4120 6875 6765 2074 6861  .0_.._A huge tha
-00001080: 6e6b 2079 6f75 205b 4572 696b 2042 6ac3  nk you [Erik Bj.
-00001090: a472 6568 6f6c 745d 2868 7474 7073 3a2f  .reholt](https:/
-000010a0: 2f67 6974 6875 622e 636f 6d2f 4572 696b  /github.com/Erik
-000010b0: 426a 6172 6529 2066 6f72 2061 6464 696e  Bjare) for addin
-000010c0: 6720 556e 6973 7761 7020 5632 2073 7570  g Uniswap V2 sup
-000010d0: 706f 7274 2c20 6173 2077 656c 6c20 6173  port, as well as
-000010e0: 2061 6c6c 2063 6861 6e67 6573 2069 6e20   all changes in 
-000010f0: 7468 6973 2076 6572 7369 6f6e 215f 0a0a  this version!_..
-00001100: 2a20 4164 6465 6420 7375 7070 6f72 7420  * Added support 
-00001110: 666f 7220 556e 6973 7761 7020 7632 0a2a  for Uniswap v2.*
-00001120: 2048 616e 646c 6520 6172 6269 7472 6172   Handle arbitrar
-00001130: 7920 746f 6b65 6e73 2028 6279 2061 6464  y tokens (by add
-00001140: 7265 7373 2920 7573 696e 6720 7468 6520  ress) using the 
-00001150: 6661 6374 6f72 7920 636f 6e74 7261 6374  factory contract
-00001160: 0a2a 2053 7769 7463 6865 6420 6672 6f6d  .* Switched from
-00001170: 2073 6574 7570 2e70 7920 746f 2070 7970   setup.py to pyp
-00001180: 726f 6a65 6374 2e74 6f6d 6c2f 706f 6574  roject.toml/poet
-00001190: 7279 0a2a 2053 7769 7463 6865 6420 6672  ry.* Switched fr
-000011a0: 6f6d 2054 7261 7669 7320 746f 2047 6974  om Travis to Git
-000011b0: 4875 6220 4163 7469 6f6e 730a 2a20 466f  Hub Actions.* Fo
-000011c0: 7220 4349 2074 6f20 776f 726b 2069 6e20  r CI to work in 
-000011d0: 796f 7572 2072 6570 6f2c 2079 6f75 206e  your repo, you n
-000011e0: 6565 6420 746f 2073 6574 2074 6865 2073  eed to set the s
-000011f0: 6563 7265 7420 4d41 494e 4e45 545f 5052  ecret MAINNET_PR
-00001200: 4f56 4944 4552 2e20 4920 7573 6520 496e  OVIDER. I use In
-00001210: 6675 7261 2e0a 2a20 5275 6e6e 696e 6720  fura..* Running 
-00001220: 7465 7374 7320 6f6e 2061 206c 6f63 616c  tests on a local
-00001230: 2066 6f72 6b20 6f66 206d 6169 6e6e 6574   fork of mainnet
-00001240: 2075 7369 6e67 2067 616e 6163 6865 2d63   using ganache-c
-00001250: 6c69 2028 7374 6172 7465 6420 6173 2061  li (started as a
-00001260: 2066 6978 7475 7265 290a 2a20 4669 7865   fixture).* Fixe
-00001270: 6420 7465 7374 7320 666f 7220 6d61 6b65  d tests for make
-00001280: 5f74 7261 6465 2061 6e64 206d 616b 655f  _trade and make_
-00001290: 7472 6164 655f 6f75 7470 7574 0a2a 2041  trade_output.* A
-000012a0: 6464 6564 2074 7970 6520 616e 6e6f 7461  dded type annota
-000012b0: 7469 6f6e 7320 746f 2074 6865 2065 6e74  tions to the ent
-000012c0: 6972 6520 636f 6465 6261 7365 2061 6e64  ire codebase and
-000012d0: 2063 6865 636b 2074 6865 6d20 7769 7468   check them with
-000012e0: 206d 7970 7920 696e 2043 490a 2a20 466f   mypy in CI.* Fo
-000012f0: 726d 6174 7465 6420 656e 7469 7265 2063  rmatted entire c
-00001300: 6f64 6562 6173 6520 7769 7468 2062 6c61  odebase with bla
-00001310: 636b 0a2a 204d 6f76 6564 2073 7475 6666  ck.* Moved stuff
-00001320: 2061 726f 756e 6420 7375 6368 2074 6861   around such tha
-00001330: 7420 7468 6520 6261 7369 6320 696d 706f  t the basic impo
-00001340: 7274 2062 6563 6f6d 6573 2066 726f 6d20  rt becomes from 
-00001350: 756e 6973 7761 7020 696d 706f 7274 2055  uniswap import U
-00001360: 6e69 7377 6170 2028 696e 7374 6561 6420  niswap (instead 
-00001370: 6f66 2066 726f 6d20 756e 6973 7761 702e  of from uniswap.
-00001380: 756e 6973 7761 7020 696d 706f 7274 2055  uniswap import U
-00001390: 6e69 7377 6170 5772 6170 7065 7229 0a2a  niswapWrapper).*
-000013a0: 2046 6978 6564 206d 6973 6320 6275 6773   Fixed misc bugs
-000013b0: 0a0a 5f30 2e33 2e33 5f0a 2a20 2050 726f  .._0.3.3_.*  Pro
-000013c0: 7669 6465 2074 6f6b 656e 2069 6e70 7574  vide token input
-000013d0: 7320 6173 2061 6464 7265 7373 6573 2069  s as addresses i
-000013e0: 6e73 7465 6164 206f 6620 6e61 6d65 730a  nstead of names.
-000013f0: 0a5f 302e 332e 325f 0a2a 2020 4164 6420  ._0.3.2_.*  Add 
-00001400: 6162 696c 6974 7920 746f 2074 7261 6e73  ability to trans
-00001410: 6665 7220 746f 6b65 6e73 2061 6674 6572  fer tokens after
-00001420: 2061 2074 7261 6465 0a2a 2020 4164 6420   a trade.*  Add 
-00001430: 7465 7374 7320 666f 7220 7468 6973 206e  tests for this n
-00001440: 6577 2066 756e 6374 696f 6e61 6c69 7479  ew functionality
-00001450: 0a0a 5f30 2e33 2e31 5f0a 2a20 2041 6464  .._0.3.1_.*  Add
-00001460: 2074 6573 7473 2066 6f72 2061 6c6c 2074   tests for all t
-00001470: 7970 6573 206f 6620 7472 6164 6573 0a0a  ypes of trades..
-00001480: 5f30 2e33 2e30 5f0a 2a20 2041 6464 2061  _0.3.0_.*  Add a
-00001490: 6269 6c69 7479 2074 6f20 6d61 6b65 2061  bility to make a
-000014a0: 6c6c 2074 7970 6573 206f 6620 7472 6164  ll types of trad
-000014b0: 6573 0a2a 2020 4164 6420 6578 616d 706c  es.*  Add exampl
-000014c0: 6520 746f 2052 4541 444d 450a 0a5f 302e  e to README.._0.
-000014d0: 322e 315f 0a2a 2020 4164 6420 6c69 7175  2.1_.*  Add liqu
-000014e0: 6964 6974 7920 7465 7374 730a 0a5f 302e  idity tests.._0.
-000014f0: 322e 305f 0a2a 2020 4164 6420 6c69 7175  2.0_.*  Add liqu
-00001500: 6964 6974 7920 616e 6420 4552 4332 3020  idity and ERC20 
-00001510: 706f 6f6c 206d 6574 686f 6473 0a0a 5f30  pool methods.._0
-00001520: 2e31 2e31 5f0a 2a20 204d 616a 6f72 2052  .1.1_.*  Major R
-00001530: 4541 444d 4520 7570 6461 7465 0a0a 5f30  EADME update.._0
-00001540: 2e31 2e30 5f0a 2a20 2041 6464 206d 6172  .1.0_.*  Add mar
-00001550: 6b65 7420 656e 6470 6f69 6e74 730a 2a20  ket endpoints.* 
-00001560: 2041 6464 2074 6573 7473 2066 6f72 206d   Add tests for m
-00001570: 6172 6b65 7420 656e 6470 6f69 6e74 730a  arket endpoints.
+00000410: 6c61 636b 290a 5b21 5b47 6974 504f 4150  lack).[![GitPOAP
+00000420: 2042 6164 6765 5d28 6874 7470 733a 2f2f   Badge](https://
+00000430: 7075 626c 6963 2d61 7069 2e67 6974 706f  public-api.gitpo
+00000440: 6170 2e69 6f2f 7631 2f72 6570 6f2f 756e  ap.io/v1/repo/un
+00000450: 6973 7761 702d 7079 7468 6f6e 2f75 6e69  iswap-python/uni
+00000460: 7377 6170 2d70 7974 686f 6e2f 6261 6467  swap-python/badg
+00000470: 6529 5d28 6874 7470 733a 2f2f 7777 772e  e)](https://www.
+00000480: 6769 7470 6f61 702e 696f 2f67 682f 756e  gitpoap.io/gh/un
+00000490: 6973 7761 702d 7079 7468 6f6e 2f75 6e69  iswap-python/uni
+000004a0: 7377 6170 2d70 7974 686f 6e29 0a0a 5b21  swap-python)..[!
+000004b0: 5b47 6974 4875 6220 5265 706f 2073 7461  [GitHub Repo sta
+000004c0: 7273 5d28 6874 7470 733a 2f2f 696d 672e  rs](https://img.
+000004d0: 7368 6965 6c64 732e 696f 2f67 6974 6875  shields.io/githu
+000004e0: 622f 7374 6172 732f 756e 6973 7761 702d  b/stars/uniswap-
+000004f0: 7079 7468 6f6e 2f75 6e69 7377 6170 2d70  python/uniswap-p
+00000500: 7974 686f 6e3f 7374 796c 653d 736f 6369  ython?style=soci
+00000510: 616c 295d 2868 7474 7073 3a2f 2f67 6974  al)](https://git
+00000520: 6875 622e 636f 6d2f 756e 6973 7761 702d  hub.com/uniswap-
+00000530: 7079 7468 6f6e 2f75 6e69 7377 6170 2d70  python/uniswap-p
+00000540: 7974 686f 6e2f 7374 6172 6761 7a65 7273  ython/stargazers
+00000550: 290a 5b21 5b54 7769 7474 6572 2046 6f6c  ).[![Twitter Fol
+00000560: 6c6f 775d 2868 7474 7073 3a2f 2f69 6d67  low](https://img
+00000570: 2e73 6869 656c 6473 2e69 6f2f 7477 6974  .shields.io/twit
+00000580: 7465 722f 666f 6c6c 6f77 2f55 6e69 7377  ter/follow/Unisw
+00000590: 6170 5079 7468 6f6e 3f6c 6162 656c 3d46  apPython?label=F
+000005a0: 6f6c 6c6f 7726 7374 796c 653d 736f 6369  ollow&style=soci
+000005b0: 616c 295d 2868 7474 7073 3a2f 2f74 7769  al)](https://twi
+000005c0: 7474 6572 2e63 6f6d 2f55 6e69 7377 6170  tter.com/Uniswap
+000005d0: 5079 7468 6f6e 290a 0a54 6865 2075 6e6f  Python)..The uno
+000005e0: 6666 6963 6961 6c20 5079 7468 6f6e 2063  fficial Python c
+000005f0: 6c69 656e 7420 666f 7220 5b55 6e69 7377  lient for [Unisw
+00000600: 6170 5d28 6874 7470 733a 2f2f 756e 6973  ap](https://unis
+00000610: 7761 702e 696f 2f29 2e0a 0a44 6f63 756d  wap.io/)...Docum
+00000620: 656e 7461 7469 6f6e 2069 7320 6176 6169  entation is avai
+00000630: 6c61 626c 6520 6174 2068 7474 7073 3a2f  lable at https:/
+00000640: 2f75 6e69 7377 6170 2d70 7974 686f 6e2e  /uniswap-python.
+00000650: 636f 6d2f 0a0a 2a2a 5761 6e74 2074 6f20  com/..**Want to 
+00000660: 6865 6c70 2069 6d70 6c65 6d65 6e74 2073  help implement s
+00000670: 7570 706f 7274 2066 6f72 2055 6e69 7377  upport for Unisw
+00000680: 6170 2076 343f 2a2a 2053 6565 205b 6973  ap v4?** See [is
+00000690: 7375 6520 2333 3337 5d28 6874 7470 733a  sue #337](https:
+000006a0: 2f2f 6769 7468 7562 2e63 6f6d 2f75 6e69  //github.com/uni
+000006b0: 7377 6170 2d70 7974 686f 6e2f 756e 6973  swap-python/unis
+000006c0: 7761 702d 7079 7468 6f6e 2f69 7373 7565  wap-python/issue
+000006d0: 732f 3333 3729 0a0a 2323 2046 756e 6374  s/337)..## Funct
+000006e0: 696f 6e61 6c69 7479 0a0a 2a20 2041 2073  ionality..*  A s
+000006f0: 696d 706c 6520 746f 2075 7365 2050 7974  imple to use Pyt
+00000700: 686f 6e20 7772 6170 7065 7220 666f 7220  hon wrapper for 
+00000710: 616c 6c20 6176 6169 6c61 626c 6520 636f  all available co
+00000720: 6e74 7261 6374 2066 756e 6374 696f 6e73  ntract functions
+00000730: 2061 6e64 2076 6172 6961 626c 6573 0a2a   and variables.*
+00000740: 2020 4120 6261 7369 6320 434c 4920 746f    A basic CLI to
+00000750: 2067 6574 2070 7269 6365 7320 616e 6420   get prices and 
+00000760: 746f 6b65 6e20 6d65 7461 6461 7461 0a2a  token metadata.*
+00000770: 2020 5369 6d70 6c65 2070 6172 7369 6e67    Simple parsing
+00000780: 206f 6620 6461 7461 2072 6574 7572 6e65   of data returne
+00000790: 6420 6672 6f6d 2074 6865 2055 6e69 7377  d from the Unisw
+000007a0: 6170 2063 6f6e 7472 6163 740a 0a23 2323  ap contract..###
+000007b0: 2053 7570 706f 7274 730a 0a20 2d20 556e   Supports.. - Un
+000007c0: 6973 7761 7020 7633 2028 6173 206f 6620  iswap v3 (as of 
+000007d0: 7630 2e35 2e30 290a 2020 2020 2d20 496e  v0.5.0).    - In
+000007e0: 636c 7564 696e 6720 6265 7461 2073 7570  cluding beta sup
+000007f0: 706f 7274 2066 6f72 2041 7262 6974 7275  port for Arbitru
+00000800: 6d20 2620 4f70 7469 6d69 736d 2064 6570  m & Optimism dep
+00000810: 6c6f 796d 656e 7473 2028 6173 206f 6620  loyments (as of 
+00000820: 7630 2e35 2e34 290a 202d 2055 6e69 7377  v0.5.4). - Unisw
+00000830: 6170 2076 3220 2861 7320 6f66 2076 302e  ap v2 (as of v0.
+00000840: 342e 3029 0a20 2d20 556e 6973 7761 7020  4.0). - Uniswap 
+00000850: 7631 2028 6465 7072 6563 6174 6564 290a  v1 (deprecated).
+00000860: 202d 2056 6172 696f 7573 2066 6f72 6b73   - Various forks
+00000870: 2028 756e 7465 7374 6564 2c20 6275 7420   (untested, but 
+00000880: 7368 6f75 6c64 2077 6f72 6b29 0a20 2020  should work).   
+00000890: 2d20 486f 6e65 7973 7761 7020 2878 4461  - Honeyswap (xDa
+000008a0: 6929 0a20 2020 2d20 5061 6e63 616b 6573  i).   - Pancakes
+000008b0: 7761 7020 2842 5343 290a 2020 202d 2053  wap (BSC).   - S
+000008c0: 7573 6869 7377 6170 2028 6d61 696e 6e65  ushiswap (mainne
+000008d0: 7429 0a0a 2323 2047 6574 7469 6e67 2053  t)..## Getting S
+000008e0: 7461 7274 6564 0a0a 5365 6520 6f75 7220  tarted..See our 
+000008f0: 5b47 6574 7469 6e67 2073 7461 7274 6564  [Getting started
+00000900: 2067 7569 6465 5d28 6874 7470 733a 2f2f   guide](https://
+00000910: 756e 6973 7761 702d 7079 7468 6f6e 2e63  uniswap-python.c
+00000920: 6f6d 2f67 6574 7469 6e67 2d73 7461 7274  om/getting-start
+00000930: 6564 2e68 746d 6c29 2069 6e20 7468 6520  ed.html) in the 
+00000940: 646f 6375 6d65 6e74 6174 696f 6e2e 0a0a  documentation...
+00000950: 2323 2054 6573 7469 6e67 0a0a 556e 6974  ## Testing..Unit
+00000960: 2074 6573 7473 2061 7265 2075 6e64 6572   tests are under
+00000970: 2064 6576 656c 6f70 6d65 6e74 2075 7369   development usi
+00000980: 6e67 2074 6865 2070 7974 6573 7420 6672  ng the pytest fr
+00000990: 616d 6577 6f72 6b2e 2043 6f6e 7472 6962  amework. Contrib
+000009a0: 7574 696f 6e73 2061 7265 2077 656c 636f  utions are welco
+000009b0: 6d65 210a 0a54 6573 7420 6172 6520 7275  me!..Test are ru
+000009c0: 6e20 6f6e 2061 2066 6f72 6b20 6f66 2074  n on a fork of t
+000009d0: 6865 206d 6169 6e20 6e65 7420 7573 696e  he main net usin
+000009e0: 6720 6761 6e61 6368 652d 636c 692e 2059  g ganache-cli. Y
+000009f0: 6f75 206e 6565 6420 746f 2069 6e73 7461  ou need to insta
+00000a00: 6c6c 2069 7420 7769 7468 2060 6e70 6d20  ll it with `npm 
+00000a10: 696e 7374 616c 6c20 2d67 2067 616e 6163  install -g ganac
+00000a20: 6865 2d63 6c69 6020 6265 666f 7265 2072  he-cli` before r
+00000a30: 756e 6e69 6e67 2074 6573 7473 2e0a 0a54  unning tests...T
+00000a40: 6f20 7275 6e20 7468 6520 6675 6c6c 2074  o run the full t
+00000a50: 6573 7420 7375 6974 652c 2069 6e20 7468  est suite, in th
+00000a60: 6520 7072 6f6a 6563 7420 6469 7265 6374  e project direct
+00000a70: 6f72 7920 7365 7420 7468 6520 6050 524f  ory set the `PRO
+00000a80: 5649 4445 5260 2065 6e76 2076 6172 6961  VIDER` env varia
+00000a90: 626c 6520 746f 2061 206d 6169 6e6e 6574  ble to a mainnet
+00000aa0: 2070 726f 7669 6465 722c 2061 6e64 2072   provider, and r
+00000ab0: 756e 3a0a 0a60 6060 7368 0a70 6f65 7472  un:..```sh.poetr
+00000ac0: 7920 696e 7374 616c 6c0a 6578 706f 7274  y install.export
+00000ad0: 2050 524f 5649 4445 523d 2023 2055 524c   PROVIDER= # URL
+00000ae0: 206f 6620 7072 6f76 6964 6572 2c20 652e   of provider, e.
+00000af0: 672e 2068 7474 7073 3a2f 2f6d 6169 6e6e  g. https://mainn
+00000b00: 6574 2e69 6e66 7572 612e 696f 2f76 332f  et.infura.io/v3/
+00000b10: 2e2e 2e0a 6d61 6b65 2074 6573 740a 2320  ....make test.# 
+00000b20: 6f72 2e2e 2e0a 706f 6574 7279 2072 756e  or....poetry run
+00000b30: 2070 7974 6573 7420 2d2d 6361 7074 7572   pytest --captur
+00000b40: 653d 6e6f 2020 2320 646f 6573 6e27 7420  e=no  # doesn't 
+00000b50: 6361 7074 7572 6520 6f75 7470 7574 2028  capture output (
+00000b60: 7665 7262 6f73 6529 0a60 6060 0a0a 2323  verbose).```..##
+00000b70: 2053 7570 706f 7274 206f 7572 2063 6f6e   Support our con
+00000b80: 7469 6e75 6564 2077 6f72 6b21 0a0a 596f  tinued work!..Yo
+00000b90: 7520 6361 6e20 7375 7070 6f72 7420 7573  u can support us
+00000ba0: 206f 6e20 5b47 6974 636f 696e 2047 7261   on [Gitcoin Gra
+00000bb0: 6e74 735d 2868 7474 7073 3a2f 2f67 6974  nts](https://git
+00000bc0: 636f 696e 2e63 6f2f 6772 616e 7473 2f32  coin.co/grants/2
+00000bd0: 3633 312f 756e 6973 7761 702d 7079 7468  631/uniswap-pyth
+00000be0: 6f6e 292e 0a0a 2323 2041 7574 686f 7273  on)...## Authors
+00000bf0: 0a0a 2a20 5b53 6861 6e65 2046 6f6e 7461  ..* [Shane Fonta
+00000c00: 696e 655d 2868 7474 7073 3a2f 2f74 7769  ine](https://twi
+00000c10: 7474 6572 2e63 6f6d 2f73 6861 6e65 636f  tter.com/shaneco
+00000c20: 696e 290a 2a20 5b45 7269 6b20 426a c3a4  in).* [Erik Bj..
+00000c30: 7265 686f 6c74 5d28 6874 7470 733a 2f2f  reholt](https://
+00000c40: 7477 6974 7465 722e 636f 6d2f 4572 696b  twitter.com/Erik
+00000c50: 426a 6172 6529 0a2a 205b 406c 6971 7569  Bjare).* [@liqui
+00000c60: 642d 385d 2868 7474 7073 3a2f 2f67 6974  d-8](https://git
+00000c70: 6875 622e 636f 6d2f 6c69 7175 6964 2d38  hub.com/liquid-8
+00000c80: 290a 2a20 2e2e 2e61 6e64 205b 6f74 6865  ).* ...and [othe
+00000c90: 7273 5d28 6874 7470 733a 2f2f 6769 7468  rs](https://gith
+00000ca0: 7562 2e63 6f6d 2f75 6e69 7377 6170 2d70  ub.com/uniswap-p
+00000cb0: 7974 686f 6e2f 756e 6973 7761 702d 7079  ython/uniswap-py
+00000cc0: 7468 6f6e 2f67 7261 7068 732f 636f 6e74  thon/graphs/cont
+00000cd0: 7269 6275 746f 7273 290a 0a2a 5761 6e74  ributors)..*Want
+00000ce0: 2074 6f20 6865 6c70 206f 7574 2077 6974   to help out wit
+00000cf0: 6820 6465 7665 6c6f 706d 656e 743f 2057  h development? W
+00000d00: 6520 6861 7665 2066 756e 6469 6e67 2074  e have funding t
+00000d10: 6f20 7468 6f73 6520 7468 6174 2064 6f21  o those that do!
+00000d20: 2053 6565 205b 2331 3831 5d28 6874 7470   See [#181](http
+00000d30: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f75  s://github.com/u
+00000d40: 6e69 7377 6170 2d70 7974 686f 6e2f 756e  niswap-python/un
+00000d50: 6973 7761 702d 7079 7468 6f6e 2f64 6973  iswap-python/dis
+00000d60: 6375 7373 696f 6e73 2f31 3831 292a 0a0a  cussions/181)*..
+00000d70: 436f 6e74 7269 6275 746f 7273 2061 6c73  Contributors als
+00000d80: 6f20 6561 726e 2074 6869 7320 6265 6175  o earn this beau
+00000d90: 7469 6675 6c20 5b47 6974 504f 4150 5d28  tiful [GitPOAP](
+00000da0: 6874 7470 733a 2f2f 6769 7470 6f61 702e  https://gitpoap.
+00000db0: 6e6f 7469 6f6e 2e73 6974 652f 5768 6174  notion.site/What
+00000dc0: 2d73 2d61 2d47 6974 504f 4150 2d35 6230  -s-a-GitPOAP-5b0
+00000dd0: 3835 6461 6163 3462 3434 3239 3939 3462  85daac4b4429994b
+00000de0: 3532 3331 6265 3032 3862 3364 3929 2066  5231be028b3d9) f
+00000df0: 6f72 2074 6865 6972 2063 6f6e 7472 6962  or their contrib
+00000e00: 7574 696f 6e73 210a 0a3c 6120 6872 6566  utions!..<a href
+00000e10: 3d22 6874 7470 733a 2f2f 7777 772e 6769  ="https://www.gi
+00000e20: 7470 6f61 702e 696f 2f67 682f 756e 6973  tpoap.io/gh/unis
+00000e30: 7761 702d 7079 7468 6f6e 2f75 6e69 7377  wap-python/unisw
+00000e40: 6170 2d70 7974 686f 6e22 3e0a 2020 3c69  ap-python">.  <i
+00000e50: 6d67 2073 7263 3d22 6874 7470 733a 2f2f  mg src="https://
+00000e60: 6173 7365 7473 2e70 6f61 702e 7879 7a2f  assets.poap.xyz/
+00000e70: 6769 7470 6f61 702d 3230 3232 2d75 6e69  gitpoap-2022-uni
+00000e80: 7377 6170 2d70 7974 686f 6e2d 636f 6e74  swap-python-cont
+00000e90: 7269 6275 746f 722d 3230 3232 2d6c 6f67  ributor-2022-log
+00000ea0: 6f2d 3136 3634 3832 3531 3931 3434 342e  o-1664825191444.
+00000eb0: 706e 6722 2077 6964 7468 3d22 3235 3670  png" width="256p
+00000ec0: 7822 3e0a 3c2f 613e 0a0a 2323 2043 6861  x">.</a>..## Cha
+00000ed0: 6e67 656c 6f67 0a0a 5f30 2e37 2e32 5f0a  ngelog.._0.7.2_.
+00000ee0: 0a2a 2055 7064 6174 6564 3a20 4465 6661  .* Updated: Defa
+00000ef0: 756c 7420 6665 6520 6973 206e 6f74 2061  ult fee is not a
+00000f00: 7070 6c69 6564 2077 6865 6e20 7573 696e  pplied when usin
+00000f10: 6720 556e 6973 7761 7020 5633 2e20 4465  g Uniswap V3. De
+00000f20: 6661 756c 7420 6665 6520 666f 7220 556e  fault fee for Un
+00000f30: 6973 7761 7020 5631 2061 6e64 2056 3220  iswap V1 and V2 
+00000f40: 6973 2073 7469 6c6c 2030 2e33 252e 0a2a  is still 0.3%..*
+00000f50: 2055 7064 6174 6564 3a20 6049 6e76 616c   Updated: `Inval
+00000f60: 6964 4665 6554 6965 7260 2065 7863 6570  idFeeTier` excep
+00000f70: 7469 6f6e 2069 7320 7261 6973 6564 2077  tion is raised w
+00000f80: 6865 6e20 6120 7469 6572 2069 7320 6e6f  hen a tier is no
+00000f90: 7420 7375 7070 6f72 7465 6420 6279 2074  t supported by t
+00000fa0: 6865 2070 726f 746f 636f 6c20 7665 7273  he protocol vers
+00000fb0: 696f 6e2e 2053 6565 2061 6c6c 2073 7570  ion. See all sup
+00000fc0: 706f 7274 6564 2074 6965 7273 2069 6e20  ported tiers in 
+00000fd0: 5b60 756e 6973 7761 702e 6665 652e 4665  [`uniswap.fee.Fe
+00000fe0: 6554 6965 7260 5d28 2e2f 756e 6973 7761  eTier`](./uniswa
+00000ff0: 702f 6665 652e 7079 234c 3132 290a 0a5f  p/fee.py#L12).._
+00001000: 302e 372e 315f 0a0a 2a20 696e 636f 6d70  0.7.1_..* incomp
+00001010: 6c65 7465 2063 6861 6e67 656c 6f67 0a0a  lete changelog..
+00001020: 5f30 2e37 2e30 5f0a 0a2a 2069 6e63 6f6d  _0.7.0_..* incom
+00001030: 706c 6574 6520 6368 616e 6765 6c6f 670a  plete changelog.
+00001040: 0a5f 302e 352e 345f 0a0a 2a20 6164 6465  ._0.5.4_..* adde
+00001050: 6420 7573 6520 6f66 2067 6173 2065 7374  d use of gas est
+00001060: 696d 6174 696f 6e20 696e 7374 6561 6420  imation instead 
+00001070: 6f66 2061 2066 6978 6564 2067 6173 206c  of a fixed gas l
+00001080: 696d 6974 2028 746f 2073 7570 706f 7274  imit (to support
+00001090: 2041 7262 6974 7275 6d29 0a2a 2061 6464   Arbitrum).* add
+000010a0: 6564 2060 7573 655f 6573 7469 6d61 7465  ed `use_estimate
+000010b0: 5f67 6173 6020 636f 6e73 7472 7563 746f  _gas` constructo
+000010c0: 7220 6172 6775 6d65 6e74 2028 7573 6564  r argument (used
+000010d0: 2069 6e20 7465 7374 696e 6729 0a2a 2061   in testing).* a
+000010e0: 6464 6564 2063 6f6e 7374 616e 7473 2f62  dded constants/b
+000010f0: 6173 6963 2073 7570 706f 7274 2066 6f72  asic support for
+00001100: 2041 7262 6974 7275 6d2c 204f 7074 696d   Arbitrum, Optim
+00001110: 6973 6d2c 2050 6f6c 7967 6f6e 2c20 616e  ism, Polygon, an
+00001120: 6420 4661 6e74 6f6d 2e20 2875 6e74 6573  d Fantom. (untes
+00001130: 7465 6429 0a2a 2069 6e63 6f6d 706c 6574  ted).* incomplet
+00001140: 6520 6368 616e 6765 6c6f 670a 0a5f 302e  e changelog.._0.
+00001150: 352e 335f 0a0a 2a20 696e 636f 6d70 6c65  5.3_..* incomple
+00001160: 7465 2063 6861 6e67 656c 6f67 0a0a 5f30  te changelog.._0
+00001170: 2e35 2e32 5f0a 0a2a 2069 6e63 6f6d 706c  .5.2_..* incompl
+00001180: 6574 6520 6368 616e 6765 6c6f 670a 0a5f  ete changelog.._
+00001190: 302e 352e 315f 0a0a 2a20 5570 6461 7465  0.5.1_..* Update
+000011a0: 6420 6465 7065 6e64 656e 6369 6573 0a2a  d dependencies.*
+000011b0: 2046 6978 6564 206d 696e 6f72 2074 7970   Fixed minor typ
+000011c0: 696e 6720 6973 7375 6573 0a0a 5f30 2e35  ing issues.._0.5
+000011d0: 2e30 5f0a 0a2a 2042 6173 6963 2073 7570  .0_..* Basic sup
+000011e0: 706f 7274 2066 6f72 2055 6e69 7377 6170  port for Uniswap
+000011f0: 2056 330a 2a20 4164 6465 6420 6e65 7720   V3.* Added new 
+00001200: 6d65 7468 6f64 7320 6067 6574 5f70 7269  methods `get_pri
+00001210: 6365 5f69 6e70 7574 6020 616e 6420 6067  ce_input` and `g
+00001220: 6574 5f70 7269 6365 5f6f 7574 7075 7460  et_price_output`
+00001230: 0a2a 204d 6164 6520 6120 6c6f 7420 6f66  .* Made a lot of
+00001240: 2070 7265 7669 6f75 736c 7920 7075 626c   previously publ
+00001250: 6963 206d 6574 686f 6473 2070 7269 7661  ic methods priva
+00001260: 7465 0a2a 2041 6464 6564 2064 6f63 756d  te.* Added docum
+00001270: 656e 7461 7469 6f6e 2073 6974 650a 2a20  entation site.* 
+00001280: 5265 6d6f 7665 6420 454e 5320 7375 7070  Removed ENS supp
+00001290: 6f72 7420 2877 6869 6368 2077 6173 2070  ort (which was p
+000012a0: 726f 6261 626c 7920 6272 6f6b 656e 2074  robably broken t
+000012b0: 6f20 6265 6769 6e20 7769 7468 290a 0a5f  o begin with).._
+000012c0: 302e 342e 365f 0a0a 2a20 4275 6720 6669  0.4.6_..* Bug fi
+000012d0: 783a 2055 7064 6174 6520 626c 6561 6368  x: Update bleach
+000012e0: 2070 6163 6b61 6765 2066 726f 6d20 332e   package from 3.
+000012f0: 312e 3420 746f 2033 2e33 2e30 0a0a 5f30  1.4 to 3.3.0.._0
+00001300: 2e34 2e35 5f0a 2a20 4275 6720 6669 783a  .4.5_.* Bug fix:
+00001310: 2055 7365 202e 6574 6820 696e 7374 6561   Use .eth instea
+00001320: 6420 6f66 202e 656e 730a 0a5f 302e 342e  d of .ens.._0.4.
+00001330: 345f 0a0a 2a20 4765 6e65 7261 6c3a 2041  4_..* General: A
+00001340: 6464 206e 6577 206c 6f67 6f20 666f 7220  dd new logo for 
+00001350: 556e 6973 7761 7020 5632 0a2a 2042 7567  Uniswap V2.* Bug
+00001360: 2066 6978 3a20 496e 7661 6c69 6420 6261   fix: Invalid ba
+00001370: 6c61 6e63 6520 6368 6563 6b20 2823 3235  lance check (#25
+00001380: 290a 2a20 4275 6720 6669 783a 2046 6978  ).* Bug fix: Fix
+00001390: 6564 2065 7272 6f72 2077 6865 6e20 7061  ed error when pa
+000013a0: 7373 696e 6720 5745 5448 2061 7320 746f  ssing WETH as to
+000013b0: 6b65 6e0a 0a5f 302e 342e 335f 0a0a 2a20  ken.._0.4.3_..* 
+000013c0: 416c 6c6f 7720 6b77 6172 6773 2069 6e20  Allow kwargs in 
+000013d0: 6061 7070 726f 7665 6460 2064 6563 6f72  `approved` decor
+000013e0: 6174 6f72 2e0a 0a5f 302e 342e 325f 0a0a  ator..._0.4.2_..
+000013f0: 2a20 4164 6420 6e6f 7465 2061 626f 7574  * Add note about
+00001400: 2055 6e69 7377 6170 2056 3220 7375 7070   Uniswap V2 supp
+00001410: 6f72 740a 0a5f 302e 342e 315f 0a0a 2a20  ort.._0.4.1_..* 
+00001420: 5570 6461 7465 2063 6861 6e67 656c 6f67  Update changelog
+00001430: 2066 6f72 2050 7950 6920 616e 6420 636c   for PyPi and cl
+00001440: 6561 6e20 7570 0a0a 5f30 2e34 2e30 5f0a  ean up.._0.4.0_.
+00001450: 0a5f 4120 6875 6765 2074 6861 6e6b 2079  ._A huge thank y
+00001460: 6f75 205b 4572 696b 2042 6ac3 a472 6568  ou [Erik Bj..reh
+00001470: 6f6c 745d 2868 7474 7073 3a2f 2f67 6974  olt](https://git
+00001480: 6875 622e 636f 6d2f 4572 696b 426a 6172  hub.com/ErikBjar
+00001490: 6529 2066 6f72 2061 6464 696e 6720 556e  e) for adding Un
+000014a0: 6973 7761 7020 5632 2073 7570 706f 7274  iswap V2 support
+000014b0: 2c20 6173 2077 656c 6c20 6173 2061 6c6c  , as well as all
+000014c0: 2063 6861 6e67 6573 2069 6e20 7468 6973   changes in this
+000014d0: 2076 6572 7369 6f6e 215f 0a0a 2a20 4164   version!_..* Ad
+000014e0: 6465 6420 7375 7070 6f72 7420 666f 7220  ded support for 
+000014f0: 556e 6973 7761 7020 7632 0a2a 2048 616e  Uniswap v2.* Han
+00001500: 646c 6520 6172 6269 7472 6172 7920 746f  dle arbitrary to
+00001510: 6b65 6e73 2028 6279 2061 6464 7265 7373  kens (by address
+00001520: 2920 7573 696e 6720 7468 6520 6661 6374  ) using the fact
+00001530: 6f72 7920 636f 6e74 7261 6374 0a2a 2053  ory contract.* S
+00001540: 7769 7463 6865 6420 6672 6f6d 2073 6574  witched from set
+00001550: 7570 2e70 7920 746f 2070 7970 726f 6a65  up.py to pyproje
+00001560: 6374 2e74 6f6d 6c2f 706f 6574 7279 0a2a  ct.toml/poetry.*
+00001570: 2053 7769 7463 6865 6420 6672 6f6d 2054   Switched from T
+00001580: 7261 7669 7320 746f 2047 6974 4875 6220  ravis to GitHub 
+00001590: 4163 7469 6f6e 730a 2a20 466f 7220 4349  Actions.* For CI
+000015a0: 2074 6f20 776f 726b 2069 6e20 796f 7572   to work in your
+000015b0: 2072 6570 6f2c 2079 6f75 206e 6565 6420   repo, you need 
+000015c0: 746f 2073 6574 2074 6865 2073 6563 7265  to set the secre
+000015d0: 7420 4d41 494e 4e45 545f 5052 4f56 4944  t MAINNET_PROVID
+000015e0: 4552 2e20 4920 7573 6520 496e 6675 7261  ER. I use Infura
+000015f0: 2e0a 2a20 5275 6e6e 696e 6720 7465 7374  ..* Running test
+00001600: 7320 6f6e 2061 206c 6f63 616c 2066 6f72  s on a local for
+00001610: 6b20 6f66 206d 6169 6e6e 6574 2075 7369  k of mainnet usi
+00001620: 6e67 2067 616e 6163 6865 2d63 6c69 2028  ng ganache-cli (
+00001630: 7374 6172 7465 6420 6173 2061 2066 6978  started as a fix
+00001640: 7475 7265 290a 2a20 4669 7865 6420 7465  ture).* Fixed te
+00001650: 7374 7320 666f 7220 6d61 6b65 5f74 7261  sts for make_tra
+00001660: 6465 2061 6e64 206d 616b 655f 7472 6164  de and make_trad
+00001670: 655f 6f75 7470 7574 0a2a 2041 6464 6564  e_output.* Added
+00001680: 2074 7970 6520 616e 6e6f 7461 7469 6f6e   type annotation
+00001690: 7320 746f 2074 6865 2065 6e74 6972 6520  s to the entire 
+000016a0: 636f 6465 6261 7365 2061 6e64 2063 6865  codebase and che
+000016b0: 636b 2074 6865 6d20 7769 7468 206d 7970  ck them with myp
+000016c0: 7920 696e 2043 490a 2a20 466f 726d 6174  y in CI.* Format
+000016d0: 7465 6420 656e 7469 7265 2063 6f64 6562  ted entire codeb
+000016e0: 6173 6520 7769 7468 2062 6c61 636b 0a2a  ase with black.*
+000016f0: 204d 6f76 6564 2073 7475 6666 2061 726f   Moved stuff aro
+00001700: 756e 6420 7375 6368 2074 6861 7420 7468  und such that th
+00001710: 6520 6261 7369 6320 696d 706f 7274 2062  e basic import b
+00001720: 6563 6f6d 6573 2066 726f 6d20 756e 6973  ecomes from unis
+00001730: 7761 7020 696d 706f 7274 2055 6e69 7377  wap import Unisw
+00001740: 6170 2028 696e 7374 6561 6420 6f66 2066  ap (instead of f
+00001750: 726f 6d20 756e 6973 7761 702e 756e 6973  rom uniswap.unis
+00001760: 7761 7020 696d 706f 7274 2055 6e69 7377  wap import Unisw
+00001770: 6170 5772 6170 7065 7229 0a2a 2046 6978  apWrapper).* Fix
+00001780: 6564 206d 6973 6320 6275 6773 0a0a 5f30  ed misc bugs.._0
+00001790: 2e33 2e33 5f0a 2a20 2050 726f 7669 6465  .3.3_.*  Provide
+000017a0: 2074 6f6b 656e 2069 6e70 7574 7320 6173   token inputs as
+000017b0: 2061 6464 7265 7373 6573 2069 6e73 7465   addresses inste
+000017c0: 6164 206f 6620 6e61 6d65 730a 0a5f 302e  ad of names.._0.
+000017d0: 332e 325f 0a2a 2020 4164 6420 6162 696c  3.2_.*  Add abil
+000017e0: 6974 7920 746f 2074 7261 6e73 6665 7220  ity to transfer 
+000017f0: 746f 6b65 6e73 2061 6674 6572 2061 2074  tokens after a t
+00001800: 7261 6465 0a2a 2020 4164 6420 7465 7374  rade.*  Add test
+00001810: 7320 666f 7220 7468 6973 206e 6577 2066  s for this new f
+00001820: 756e 6374 696f 6e61 6c69 7479 0a0a 5f30  unctionality.._0
+00001830: 2e33 2e31 5f0a 2a20 2041 6464 2074 6573  .3.1_.*  Add tes
+00001840: 7473 2066 6f72 2061 6c6c 2074 7970 6573  ts for all types
+00001850: 206f 6620 7472 6164 6573 0a0a 5f30 2e33   of trades.._0.3
+00001860: 2e30 5f0a 2a20 2041 6464 2061 6269 6c69  .0_.*  Add abili
+00001870: 7479 2074 6f20 6d61 6b65 2061 6c6c 2074  ty to make all t
+00001880: 7970 6573 206f 6620 7472 6164 6573 0a2a  ypes of trades.*
+00001890: 2020 4164 6420 6578 616d 706c 6520 746f    Add example to
+000018a0: 2052 4541 444d 450a 0a5f 302e 322e 315f   README.._0.2.1_
+000018b0: 0a2a 2020 4164 6420 6c69 7175 6964 6974  .*  Add liquidit
+000018c0: 7920 7465 7374 730a 0a5f 302e 322e 305f  y tests.._0.2.0_
+000018d0: 0a2a 2020 4164 6420 6c69 7175 6964 6974  .*  Add liquidit
+000018e0: 7920 616e 6420 4552 4332 3020 706f 6f6c  y and ERC20 pool
+000018f0: 206d 6574 686f 6473 0a0a 5f30 2e31 2e31   methods.._0.1.1
+00001900: 5f0a 2a20 204d 616a 6f72 2052 4541 444d  _.*  Major READM
+00001910: 4520 7570 6461 7465 0a0a 5f30 2e31 2e30  E update.._0.1.0
+00001920: 5f0a 2a20 2041 6464 206d 6172 6b65 7420  _.*  Add market 
+00001930: 656e 6470 6f69 6e74 730a 2a20 2041 6464  endpoints.*  Add
+00001940: 2074 6573 7473 2066 6f72 206d 6172 6b65   tests for marke
+00001950: 7420 656e 6470 6f69 6e74 730a            t endpoints.
```

### Comparing `uniswap_python_route-0.5.5.5/pyproject.toml` & `uniswap_python_route-0.7.2/pyproject.toml`

 * *Files 12% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 [tool.poetry]
 name = "uniswap-python-route"
-version = "0.5.5.5"
+version = "0.7.2"
 description = "An unofficial Python wrapper for the decentralized exchange Uniswap"
 repository = "https://github.com/starascendin/uniswap-python"
 readme = "README.md"
 keywords = ["uniswap", "ethereum", "exchange", "trading"]
 authors = ["Shane Fontaine <shane6fontaine@gmail.com>", "Erik Bjäreholt <erik@bjareho.lt>"]
 license = "MIT"
 packages = [
@@ -20,29 +20,34 @@
 
 
 [tool.poetry.scripts]
 unipy = "uniswap:main"
 
 [tool.poetry.dependencies]
 python = "^3.7.2"
-web3 = "^5.23.0"
+web3 = { version = "^6.0", allow-prereleases = true }
 click = "^8.0.3"
 python-dotenv = "*"
+typing-extensions = "*"
 
 [tool.poetry.dev-dependencies]
 mypy = "*"
 black = "*"
 pytest = "^6.0"
 pytest-cov = "*"
 pytest-dotenv = "*"
 flake8 = "*"
 Sphinx = "*"
 sphinx-book-theme = "*"
 sphinx-click = "*"
+pydata-sphinx-theme = "0.13.1"  # due to: https://github.com/executablebooks/sphinx-book-theme/issues/711
 
 [tool.pytest.ini_options]
 log_cli = false  # to print logs during tests, set to true
 #log_level = "NOTSET"
 
+[tool.ruff]
+ignore = ["E402", "E501"]
+
 [build-system]
 requires = ["poetry>=0.12"]
 build-backend = "poetry.masonry.api"
```

### Comparing `uniswap_python_route-0.5.5.5/uniswap/assets/erc20.abi` & `uniswap_python_route-0.7.2/uniswap/assets/erc20.abi`

 * *Files identical despite different names*

### Comparing `uniswap_python_route-0.5.5.5/uniswap/assets/erc20b32.abi` & `uniswap_python_route-0.7.2/uniswap/assets/erc20b32.abi`

 * *Files identical despite different names*

### Comparing `uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v1/exchange.abi` & `uniswap_python_route-0.7.2/uniswap/assets/uniswap-v1/exchange.abi`

 * *Files identical despite different names*

### Comparing `uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v1/factory.abi` & `uniswap_python_route-0.7.2/uniswap/assets/uniswap-v1/factory.abi`

 * *Files identical despite different names*

### Comparing `uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v2/factory.abi` & `uniswap_python_route-0.7.2/uniswap/assets/uniswap-v2/factory.abi`

 * *Files identical despite different names*

### Comparing `uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v2/router02.abi` & `uniswap_python_route-0.7.2/uniswap/assets/uniswap-v2/router02.abi`

 * *Files identical despite different names*

### Comparing `uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v3/factory.abi` & `uniswap_python_route-0.7.2/uniswap/assets/uniswap-v3/factory.abi`

 * *Files identical despite different names*

### Comparing `uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v3/pool.abi` & `uniswap_python_route-0.7.2/uniswap/assets/uniswap-v3/pool.abi`

 * *Files identical despite different names*

### Comparing `uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v3/quoter.abi` & `uniswap_python_route-0.7.2/uniswap/assets/uniswap-v3/quoter.abi`

 * *Files identical despite different names*

### Comparing `uniswap_python_route-0.5.5.5/uniswap/assets/uniswap-v3/router.abi` & `uniswap_python_route-0.7.2/uniswap/assets/uniswap-v3/router.abi`

 * *Files identical despite different names*

### Comparing `uniswap_python_route-0.5.5.5/uniswap/cli.py` & `uniswap_python_route-0.7.2/uniswap/cli.py`

 * *Files 18% similar despite different names*

```diff
@@ -1,52 +1,60 @@
 import logging
 import os
+from typing import Optional
 
 import click
 from dotenv import load_dotenv
 from web3 import Web3
 
-from .uniswap import Uniswap, AddressLike, _str_to_addr
-from .token import BaseToken
-from .tokens import tokens
 from .constants import ETH_ADDRESS
-
+from .fee import FeeTier
+from .token import BaseToken
+from .tokens import get_tokens
+from .uniswap import AddressLike, Uniswap, _str_to_addr
 
 logger = logging.getLogger(__name__)
 
+# Global used in _coerce_to_checksum to look up tokens
+_uni: Optional[Uniswap] = None
+
 
 def _coerce_to_checksum(addr: str) -> str:
+    assert _uni
+    tokens = get_tokens(_uni.netname)
     if not addr.startswith("0x"):
         if addr.upper() in tokens:
             return tokens[addr.upper()]
         else:
             raise ValueError(
                 "token was not an address, and a shorthand was not found in the token db"
             )
-    if Web3.isChecksumAddress(addr):
+    if Web3.is_checksum_address(addr):
         return addr
     else:
-        return Web3.toChecksumAddress(addr)
+        return Web3.to_checksum_address(addr)
 
 
 @click.group()
 @click.option("-v", "--verbose", is_flag=True)
 @click.option(
     "--version",
     type=click.Choice(["1", "2", "3"]),
-    default=os.getenv("UNISWAP_VERSION", "2"),
+    default=os.getenv("UNISWAP_VERSION", "3"),
 )
 @click.pass_context
 def main(ctx: click.Context, verbose: bool, version: str) -> None:
     logging.basicConfig(level=logging.INFO if verbose else logging.WARNING)
     load_dotenv()
 
     ctx.ensure_object(dict)
     ctx.obj["VERBOSE"] = verbose
     ctx.obj["UNISWAP"] = Uniswap(None, None, version=int(version))
+    global _uni
+    _uni = ctx.obj["UNISWAP"]
 
 
 @main.command()
 @click.argument("token_in", type=_coerce_to_checksum)
 @click.argument("token_out", type=_coerce_to_checksum)
 @click.option(
     "--raw",
@@ -59,33 +67,33 @@
 )
 @click.pass_context
 def price(
     ctx: click.Context,
     token_in: AddressLike,
     token_out: AddressLike,
     raw: bool,
-    quantity: int = None,
+    quantity: Optional[int] = None,
 ) -> None:
     """Returns the price of ``quantity`` tokens of ``token_in`` quoted in ``token_out``."""
     uni: Uniswap = ctx.obj["UNISWAP"]
     if quantity is None:
         if token_in == ETH_ADDRESS:
             decimals = 18
         else:
             decimals = uni.get_token(token_in).decimals
-        quantity = 10 ** decimals
-    price = uni.get_price_input(token_in, token_out, qty=quantity)
+        quantity = 10**decimals
+    price = uni.get_price_input(token_in, token_out, qty=quantity, fee=FeeTier.TIER_3000)
     if raw:
         click.echo(price)
     else:
         if token_in == ETH_ADDRESS:
             decimals = 18
         else:
             decimals = uni.get_token(token_out).decimals
-        click.echo(price / 10 ** decimals)
+        click.echo(price / 10**decimals)
 
 
 @main.command()
 @click.argument("token", type=_coerce_to_checksum)
 @click.pass_context
 def token(ctx: click.Context, token: AddressLike) -> None:
     """Show metadata for token"""
@@ -96,14 +104,14 @@
 
 @main.command()
 @click.option("--metadata", is_flag=True, help="Also get metadata for tokens")
 @click.pass_context
 def tokendb(ctx: click.Context, metadata: bool) -> None:
     """List known token addresses"""
     uni: Uniswap = ctx.obj["UNISWAP"]
-    for symbol, addr in tokens.items():
+    for symbol, addr in get_tokens(uni.netname).items():
         if metadata and addr != "0x0000000000000000000000000000000000000000":
             data = uni.get_token(_str_to_addr(addr))
             assert data.symbol.lower() == symbol.lower()
             click.echo(data)
         else:
             click.echo(BaseToken(symbol, addr))
```

### Comparing `uniswap_python_route-0.5.5.5/uniswap/decorators.py` & `uniswap_python_route-0.7.2/uniswap/decorators.py`

 * *Files 11% similar despite different names*

```diff
@@ -1,24 +1,39 @@
 import functools
-from typing import Callable, Any, List, Dict, TYPE_CHECKING
+from typing import (
+    TYPE_CHECKING,
+    Callable,
+    List,
+    Optional,
+    TypeVar,
+)
+
+from typing_extensions import Concatenate, ParamSpec
 
 from .constants import ETH_ADDRESS
+from .types import AddressLike
 
 if TYPE_CHECKING:
     from .uniswap import Uniswap
 
 
-def check_approval(method: Callable) -> Callable:
+T = TypeVar("T")
+P = ParamSpec("P")
+
+
+def check_approval(
+    method: Callable[Concatenate["Uniswap", P], T]
+) -> Callable[Concatenate["Uniswap", P], T]:
     """Decorator to check if user is approved for a token. It approves them if they
     need to be approved."""
 
     @functools.wraps(method)
-    def approved(self: Any, *args: Any, **kwargs: Any) -> Any:
+    def approved(self: "Uniswap", *args: P.args, **kwargs: P.kwargs) -> T:
         # Check to see if the first token is actually ETH
-        token = args[0] if args[0] != ETH_ADDRESS else None
+        token: Optional[AddressLike] = args[0] if args[0] != ETH_ADDRESS else None  # type: ignore
         token_two = None
 
         # Check second token, if needed
         if method.__name__ == "make_trade" or method.__name__ == "make_trade_output":
             token_two = args[1] if args[1] != ETH_ADDRESS else None
 
         # Approve both tokens, if needed
@@ -28,26 +43,32 @@
             if not is_approved:
                 self.approve(token)
         return method(self, *args, **kwargs)
 
     return approved
 
 
-def supports(versions: List[int]) -> Callable:
-    def g(f: Callable) -> Callable:
+def supports(
+    versions: List[int],
+) -> Callable[
+    [Callable[Concatenate["Uniswap", P], T]], Callable[Concatenate["Uniswap", P], T]
+]:
+    def g(
+        f: Callable[Concatenate["Uniswap", P], T]
+    ) -> Callable[Concatenate["Uniswap", P], T]:
         if f.__doc__ is None:
             f.__doc__ = ""
         f.__doc__ += """\n\n
         Supports Uniswap
         """ + ", ".join(
             "v" + str(ver) for ver in versions
         )
 
         @functools.wraps(f)
-        def check_version(self: "Uniswap", *args: List, **kwargs: Dict) -> Any:
+        def check_version(self: "Uniswap", *args: P.args, **kwargs: P.kwargs) -> T:
             if self.version not in versions:
                 raise Exception(
                     f"Function {f.__name__} does not support version {self.version} of Uniswap passed to constructor"
                 )
             return f(self, *args, **kwargs)
 
         return check_version
```

### Comparing `uniswap_python_route-0.5.5.5/uniswap/token.py` & `uniswap_python_route-0.7.2/uniswap/token.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,8 +1,9 @@
 from dataclasses import dataclass
+
 from .types import AddressLike
 
 
 @dataclass
 class BaseToken:
     """Base for tokens of all kinds"""
```

### Comparing `uniswap_python_route-0.5.5.5/uniswap/uniswap.py` & `uniswap_python_route-0.7.2/uniswap/uniswap.py`

 * *Files 20% similar despite different names*

```diff
@@ -1,45 +1,68 @@
+import functools
+import logging
 import os
 import time
-import logging
-import functools
-from typing import List, Any, Optional, Union, Tuple, Dict, Iterable
+from collections import namedtuple
+from typing import (
+    Any,
+    Dict,
+    Iterable,
+    List,
+    Optional,
+    Sequence,
+    Tuple,
+    Union,
+)
 
+from eth_typing.evm import Address, ChecksumAddress
+from hexbytes import HexBytes
 from web3 import Web3
-from web3.eth import Contract
-from web3.contract import ContractFunction
+from web3._utils.abi import map_abi_data
+from web3._utils.normalizers import BASE_RETURN_NORMALIZERS
+from web3.contract import Contract
+from web3.contract.contract import ContractFunction
 from web3.exceptions import BadFunctionCallOutput, ContractLogicError
 from web3.types import (
+    Nonce,
     TxParams,
+    TxReceipt,
     Wei,
-    Address,
-    ChecksumAddress,
-    Nonce,
-    HexBytes,
 )
 
-from .types import AddressLike
+from .constants import (
+    ETH_ADDRESS,
+    MAX_TICK,
+    MAX_UINT_128,
+    MIN_TICK,
+    WETH9_ADDRESS,
+    _factory_contract_addresses_v1,
+    _factory_contract_addresses_v2,
+    _netid_to_name,
+    _router_contract_addresses_v2,
+    _tick_bitmap_range,
+    _tick_spacing,
+)
+from .decorators import check_approval, supports
+from .exceptions import InsufficientBalance, InvalidToken
+from .fee import validate_fee_tier
 from .token import ERC20Token
-from .tokens import tokens, tokens_rinkeby
-from .exceptions import InvalidToken, InsufficientBalance
+from .types import AddressLike
 from .util import (
-    _str_to_addr,
     _addr_to_str,
-    _validate_address,
+    _get_eth_simple_cache_middleware,
     _load_contract,
     _load_contract_erc20,
+    _str_to_addr,
+    _validate_address,
+    chunks,
+    encode_sqrt_ratioX96,
     is_same_address,
-)
-from .decorators import supports, check_approval
-from .constants import (
-    _netid_to_name,
-    _factory_contract_addresses_v1,
-    _factory_contract_addresses_v2,
-    _router_contract_addresses_v2,
-    ETH_ADDRESS,
+    nearest_tick,
+    realised_fee_percentage,
 )
 
 logger = logging.getLogger(__name__)
 
 
 class Uniswap:
     """
@@ -56,61 +79,69 @@
     default_slippage: float
     use_estimate_gas: bool
 
     def __init__(
         self,
         address: Union[AddressLike, str, None],
         private_key: Optional[str],
-        provider: str = None,
-        web3: Web3 = None,
+        provider: Optional[str] = None,
+        web3: Optional[Web3] = None,
         version: int = 1,
         default_slippage: float = 0.01,
         use_estimate_gas: bool = True,
         # use_eip1559: bool = True,
-        factory_contract_addr: str = None,
-        router_contract_addr: str = None,
+        factory_contract_addr: Optional[str] = None,
+        router_contract_addr: Optional[str] = None,
+        enable_caching: bool = False,
     ) -> None:
         """
         :param address: The public address of the ETH wallet to use.
         :param private_key: The private key of the ETH wallet to use.
         :param provider: Can be optionally set to a Web3 provider URI. If none set, will fall back to the PROVIDER environment variable, or web3 if set.
         :param web3: Can be optionally set to a custom Web3 instance.
         :param version: Which version of the Uniswap contracts to use.
         :param default_slippage: Default slippage for a trade, as a float (0.01 is 1%). WARNING: slippage is untested.
         :param factory_contract_addr: Can be optionally set to override the address of the factory contract.
         :param router_contract_addr: Can be optionally set to override the address of the router contract (v2 only).
+        :param enable_caching: Optionally enables middleware caching RPC method calls.
         """
         self.address = _str_to_addr(
             address or "0x0000000000000000000000000000000000000000"
         )
         self.private_key = (
             private_key
             or "0x0000000000000000000000000000000000000000000000000000000000000000"
         )
 
         self.version = version
+        if self.version not in [1, 2, 3]:
+            raise Exception(
+                f"Invalid version '{self.version}', only 1, 2 or 3 supported"
+            )  # pragma: no cover
 
         # TODO: Write tests for slippage
         self.default_slippage = default_slippage
         self.use_estimate_gas = use_estimate_gas
 
         if web3:
             self.w3 = web3
         else:
             # Initialize web3. Extra provider for testing.
             if not provider:
                 provider = os.environ["PROVIDER"]
             self.w3 = Web3(Web3.HTTPProvider(provider, request_kwargs={"timeout": 60}))
 
-        # Cache netid to avoid extra RPC calls
+        if enable_caching:
+            self.w3.middleware_onion.inject(_get_eth_simple_cache_middleware(), layer=0)
+
         self.netid = int(self.w3.net.version)
         if self.netid in _netid_to_name:
             self.netname = _netid_to_name[self.netid]
         else:
-            raise Exception(f"Unknown netid: {self.netid}")
+            raise Exception(f"Unknown netid: {self.netid}")  # pragma: no cover
         logger.info(f"Using {self.w3} ('{self.netname}', netid: {self.netid})")
 
         self.last_nonce: Nonce = self.w3.eth.get_transaction_count(self.address)
 
         # This code automatically approves you for trading on the exchange.
         # max_approval is to allow the contract to exchange on your behalf.
         # max_approval_check checks that current approval is above a reasonable number
@@ -162,14 +193,33 @@
             )
             self.quoter = _load_contract(
                 self.w3, abi_name="uniswap-v3/quoter", address=quoter_addr
             )
             self.router = _load_contract(
                 self.w3, abi_name="uniswap-v3/router", address=self.router_address
             )
+            self.positionManager_addr = _str_to_addr(
+                "0xC36442b4a4522E871399CD717aBDD847Ab11FE88"
+            )
+            self.nonFungiblePositionManager = _load_contract(
+                self.w3,
+                abi_name="uniswap-v3/nonFungiblePositionManager",
+                address=self.positionManager_addr,
+            )
+            if self.netname == "arbitrum":
+                multicall2_addr = _str_to_addr(
+                    "0x50075F151ABC5B6B448b1272A0a1cFb5CFA25828"
+                )
+            else:
+                multicall2_addr = _str_to_addr(
+                    "0x5BA1e12693Dc8F9c48aAD8770482f4739bEeD696"
+                )
+            self.multicall2 = _load_contract(
+                self.w3, abi_name="uniswap-v3/multicall", address=multicall2_addr
+            )
         else:
             raise Exception(
                 f"Invalid version '{self.version}', only 1, 2 or 3 supported"
             )
 
         if hasattr(self, "factory_contract"):
             logger.info(f"Using factory contract: {self.factory_contract}")
@@ -177,43 +227,37 @@
     # ------ Market --------------------------------------------------------------------
 
     def get_price_input(
         self,
         token0: AddressLike,  # input token
         token1: AddressLike,  # output token
         qty: int,
-        fee: int = None,
+        fee: Optional[int] = None,
         route: Optional[List[AddressLike]] = None,
     ) -> int:
         """Given `qty` amount of the input `token0`, returns the maximum output amount of output `token1`."""
-        if fee is None:
-            fee = 3000
-            if self.version == 3:
-                logger.warning("No fee set, assuming 0.3%")
+        fee = validate_fee_tier(fee=fee, version=self.version)
 
         if token0 == ETH_ADDRESS:
             return self._get_eth_token_input_price(token1, Wei(qty), fee)
         elif token1 == ETH_ADDRESS:
             return self._get_token_eth_input_price(token0, qty, fee)
         else:
             return self._get_token_token_input_price(token0, token1, qty, fee, route)
 
     def get_price_output(
         self,
         token0: AddressLike,
         token1: AddressLike,
         qty: int,
-        fee: int = None,
+        fee: Optional[int] = None,
         route: Optional[List[AddressLike]] = None,
     ) -> int:
         """Returns the minimum amount of `token0` required to buy `qty` amount of `token1`."""
-        if fee is None:
-            fee = 3000
-            if self.version == 3:
-                logger.warning("No fee set, assuming 0.3%")
+        fee = validate_fee_tier(fee=fee, version=self.version)
 
         if is_same_address(token0, ETH_ADDRESS):
             return self._get_eth_token_output_price(token1, qty, fee)
         elif is_same_address(token1, ETH_ADDRESS):
             return self._get_token_eth_output_price(token0, Wei(qty), fee)
         else:
             return self._get_token_token_output_price(token0, token1, qty, fee, route)
@@ -232,14 +276,16 @@
             price = self.router.functions.getAmountsOut(
                 qty, [self.get_weth_address(), token]
             ).call()[-1]
         elif self.version == 3:
             price = self._get_token_token_input_price(
                 self.get_weth_address(), token, qty, fee=fee
             )  # type: ignore
+        else:
+            raise ValueError  # pragma: no cover
         return price
 
     def _get_token_eth_input_price(
         self,
         token: AddressLike,  # input token
         qty: int,
         fee: int,
@@ -252,14 +298,16 @@
             price = self.router.functions.getAmountsOut(
                 qty, [token, self.get_weth_address()]
             ).call()[-1]
         elif self.version == 3:
             price = self._get_token_token_input_price(
                 token, self.get_weth_address(), qty, fee=fee
             )
+        else:
+            raise ValueError  # pragma: no cover
         return price
 
     def _get_token_token_input_price(
         self,
         token0: AddressLike,  # input token
         token1: AddressLike,  # output token
         qty: int,
@@ -300,66 +348,68 @@
             raise ValueError("function not supported for this version of Uniswap")
         return price
 
     def _get_eth_token_output_price(
         self,
         token: AddressLike,  # output token
         qty: int,
-        fee: int = None,
+        fee: Optional[int] = None,
     ) -> Wei:
         """Public price (i.e. amount of ETH needed) for ETH to token trades with an exact output."""
+        fee = validate_fee_tier(fee=fee, version=self.version)
         if self.version == 1:
             ex = self._exchange_contract(token)
             price: Wei = ex.functions.getEthToTokenOutputPrice(qty).call()
         elif self.version == 2:
             route = [self.get_weth_address(), token]
             price = self.router.functions.getAmountsIn(qty, route).call()[0]
         elif self.version == 3:
-            if not fee:
-                logger.warning("No fee set, assuming 0.3%")
-                fee = 3000
             price = Wei(
                 self._get_token_token_output_price(
                     self.get_weth_address(), token, qty, fee=fee
                 )
             )
+        else:
+            raise ValueError  # pragma: no cover
         return price
 
     def _get_token_eth_output_price(
-        self, token: AddressLike, qty: Wei, fee: int = None  # input token
+        self, token: AddressLike, qty: Wei, fee: Optional[int] = None  # input token
     ) -> int:
         """Public price (i.e. amount of input token needed) for token to ETH trades with an exact output."""
+        fee = validate_fee_tier(fee=fee, version=self.version)
         if self.version == 1:
             ex = self._exchange_contract(token)
             price: int = ex.functions.getTokenToEthOutputPrice(qty).call()
         elif self.version == 2:
             route = [token, self.get_weth_address()]
             price = self.router.functions.getAmountsIn(qty, route).call()[0]
         elif self.version == 3:
-            if not fee:
-                logger.warning("No fee set, assuming 0.3%")
-                fee = 3000
             price = self._get_token_token_output_price(
                 token, self.get_weth_address(), qty, fee=fee
             )
+        else:
+            raise ValueError  # pragma: no cover
         return price
 
+    @supports([2, 3])
     def _get_token_token_output_price(
         self,
         token0: AddressLike,  # input token
         token1: AddressLike,  # output token
         qty: int,
-        fee: int = None,
+        fee: Optional[int] = None,
         route: Optional[List[AddressLike]] = None,
     ) -> int:
         """
         Public price (i.e. amount of input token needed) for token to token trades with an exact output.
 
         :param fee: (v3 only) The pool's fee in hundredths of a bip, i.e. 1e-6 (3000 is 0.3%)
         """
+        fee = validate_fee_tier(fee=fee, version=self.version)
         if not route:
             if self.version == 2:
                 # If one of the tokens are WETH, delegate to appropriate call.
                 # See: https://github.com/shanefontaine/uniswap-python/issues/22
                 if is_same_address(token0, self.get_weth_address()):
                     return int(self._get_eth_token_output_price(token1, qty, fee))
                 elif is_same_address(token1, self.get_weth_address()):
@@ -367,51 +417,48 @@
 
                 route = [token0, self.get_weth_address(), token1]
                 logger.warning(f"No route specified, assuming route: {route}")
 
         if self.version == 2:
             price: int = self.router.functions.getAmountsIn(qty, route).call()[0]
         elif self.version == 3:
-            if not fee:
-                logger.warning("No fee set, assuming 0.3%")
-                fee = 3000
             if route:
                 # NOTE: to support custom routes we need to support the Path data encoding: https://github.com/Uniswap/uniswap-v3-periphery/blob/main/contracts/libraries/Path.sol
                 # result: tuple = self.quoter.functions.quoteExactOutput(route, qty).call()
                 raise Exception("custom route not yet supported for v3")
 
             # FIXME: How to calculate this properly?
             #   - https://docs.uniswap.org/reference/libraries/SqrtPriceMath
             #   - https://github.com/Uniswap/uniswap-v3-sdk/blob/main/src/swapRouter.ts
             sqrtPriceLimitX96 = 0
             price = self.quoter.functions.quoteExactOutputSingle(
                 token0, token1, fee, qty, sqrtPriceLimitX96
             ).call()
         else:
-            raise ValueError("function not supported for this version of Uniswap")
+            raise ValueError  # pragma: no cover
         return price
 
     # ------ Make Trade ----------------------------------------------------------------
     @check_approval
     def make_trade(
         self,
         input_token: AddressLike,
         output_token: AddressLike,
         qty: Union[int, Wei],
-        recipient: AddressLike = None,
-        fee: int = None,
-        slippage: float = None,
+        recipient: Optional[AddressLike] = None,
+        fee: Optional[int] = None,
+        slippage: Optional[float] = None,
         fee_on_transfer: bool = False,
         route: Optional[List[AddressLike]] = None,
     ) -> HexBytes:
         """Make a trade by defining the qty of the input token."""
-        if fee is None:
-            fee = 3000
-            if self.version == 3:
-                logger.warning("No fee set, assuming 0.3%")
+        if not isinstance(qty, int):
+            raise TypeError("swapped quantity must be an integer")
+
+        fee = validate_fee_tier(fee=fee, version=self.version)
 
         if slippage is None:
             slippage = self.default_slippage
 
         if input_token == output_token:
             raise ValueError
 
@@ -437,33 +484,30 @@
 
     @check_approval
     def make_trade_output(
         self,
         input_token: AddressLike,
         output_token: AddressLike,
         qty: Union[int, Wei],
-        recipient: AddressLike = None,
-        fee: int = None,
-        slippage: float = None,
+        recipient: Optional[AddressLike] = None,
+        fee: Optional[int] = None,
+        slippage: Optional[float] = None,
     ) -> HexBytes:
         """Make a trade by defining the qty of the output token."""
-        if fee is None:
-            fee = 3000
-            if self.version == 3:
-                logger.warning("No fee set, assuming 0.3%")
+        fee = validate_fee_tier(fee=fee, version=self.version)
 
         if slippage is None:
             slippage = self.default_slippage
 
         if input_token == output_token:
             raise ValueError
 
         if input_token == ETH_ADDRESS:
             balance = self.get_eth_balance()
-            need = self._get_eth_token_output_price(output_token, qty)
+            need = self._get_eth_token_output_price(output_token, qty, fee)
             if balance < need:
                 raise InsufficientBalance(balance, need)
             return self._eth_to_token_swap_output(
                 output_token, qty, recipient, fee, slippage
             )
         elif output_token == ETH_ADDRESS:
             return self._token_to_eth_swap_output(
@@ -548,15 +592,15 @@
                         "amountOutMinimum": min_tokens_bought,
                         "sqrtPriceLimitX96": sqrtPriceLimitX96,
                     }
                 ),
                 self._get_tx_params(value=qty),
             )
         else:
-            raise ValueError
+            raise ValueError  # pragma: no cover
 
     def _token_to_eth_swap_input(
         self,
         input_token: AddressLike,
         qty: int,
         recipient: Optional[AddressLike],
         fee: int,
@@ -637,17 +681,16 @@
             )
 
             # Multicall
             return self._build_and_send_tx(
                 self.router.functions.multicall([swap_data, unwrap_data]),
                 self._get_tx_params(),
             )
-
         else:
-            raise ValueError
+            raise ValueError  # pragma: no cover
 
     def _token_to_token_swap_input(
         self,
         input_token: AddressLike,
         output_token: AddressLike,
         qty: int,
         recipient: Optional[AddressLike],
@@ -686,21 +729,14 @@
             if not recipient:
                 function = token_funcs.tokenToTokenSwapInput(*func_params)
             else:
                 func_params.insert(len(func_params) - 1, recipient)
                 function = token_funcs.tokenToTokenTransferInput(*func_params)
             return self._build_and_send_tx(function)
         elif self.version == 2:
-            # BL: if route is non, set route to TOKEN0 TOKEN1.
-            path_route = None
-            if route is None:
-                path_route = [input_token, output_token]
-            
-            path_route = [input_token, output_token] if route is None else route
-            
             min_tokens_bought = int(
                 (1 - slippage)
                 * self._get_token_token_input_price(
                     input_token, output_token, qty, fee=fee, route=route
                 )
             )
             if fee_on_transfer:
@@ -713,26 +749,26 @@
             camelot_dex_arbitrum_router_addr = "0xc873fEcbd354f5A56E00E710B90EF4201db2448d"
             if self.router.address == camelot_dex_arbitrum_router_addr:
                 logger.info("Using CamelotDex Arbitrum Router....")
                 return self._build_and_send_tx(
                     func(
                         qty,
                         min_tokens_bought,
-                        path_route,
+                        [input_token, output_token],
                         recipient,
                         '0x0000000000000000000000000000000000000000',
                         self._deadline(),
                     ),
                 )
             
             return self._build_and_send_tx(
                 func(
                     qty,
                     min_tokens_bought,
-                    path_route,
+                    [input_token, self.get_weth_address(), output_token],
                     recipient,
                     self._deadline(),
                 ),
             )
         elif self.version == 3:
             if fee_on_transfer:
                 raise Exception("fee on transfer not supported by Uniswap v3")
@@ -757,15 +793,15 @@
                         "amountOutMinimum": min_tokens_bought,
                         "sqrtPriceLimitX96": sqrtPriceLimitX96,
                     }
                 ),
                 self._get_tx_params(),
             )
         else:
-            raise ValueError
+            raise ValueError  # pragma: no cover
 
     def _eth_to_token_swap_output(
         self,
         output_token: AddressLike,
         qty: int,
         recipient: Optional[AddressLike],
         fee: int,
@@ -1078,14 +1114,301 @@
         """Remove liquidity from the pool."""
         func_params = [int(max_token), 1, 1, self._deadline()]
         function = self._exchange_contract(token).functions.removeLiquidity(
             *func_params
         )
         return self._build_and_send_tx(function)
 
+    @supports([3])
+    def mint_liquidity(
+        self,
+        pool: Contract,
+        amount_0: int,
+        amount_1: int,
+        tick_lower: int,
+        tick_upper: int,
+        deadline: int = 2**64,
+    ) -> TxReceipt:
+        """
+        add liquidity to pool and mint position nft
+        """
+
+        token_0 = pool.functions.token0().call()
+        token_1 = pool.functions.token1().call()
+        token_0_instance = _load_contract(self.w3, abi_name="erc20", address=token_0)
+        token_1_instance = _load_contract(self.w3, abi_name="erc20", address=token_1)
+
+        balance_0 = self.get_token_balance(token_0)
+        balance_1 = self.get_token_balance(token_1)
+
+        assert balance_0 > amount_0, f"Have {balance_0}, need {amount_0}: {token_0}"
+        assert balance_1 > amount_1, f"Have {balance_1}, need {amount_1}: {token_1}"
+
+        fee = pool.functions.fee().call()
+        tick_lower = nearest_tick(tick_lower, fee)
+        tick_upper = nearest_tick(tick_upper, fee)
+        assert tick_lower < tick_upper, "Invalid tick range"
+
+        *_, isInit = pool.functions.slot0().call()
+        # If pool is not initialized, init pool w/ sqrt_price_x96 encoded from amount_0 & amount_1
+        if isInit is False:
+            sqrt_pricex96 = encode_sqrt_ratioX96(amount_0, amount_1)
+            pool.functions.initialize(sqrt_pricex96).transact(
+                {"from": _addr_to_str(self.address)}
+            )
+
+        nft_manager = self.nonFungiblePositionManager
+        token_0_instance.functions.approve(nft_manager.address, amount_0).transact(
+            {"from": _addr_to_str(self.address)}
+        )
+        token_1_instance.functions.approve(nft_manager.address, amount_1).transact(
+            {"from": _addr_to_str(self.address)}
+        )
+
+        # TODO: add slippage param
+        tx_hash = nft_manager.functions.mint(
+            (
+                token_0,
+                token_1,
+                fee,
+                tick_lower,
+                tick_upper,
+                amount_0,
+                amount_1,
+                0,
+                0,
+                self.address,
+                deadline,
+            )
+        ).transact({"from": _addr_to_str(self.address)})
+        receipt = self.w3.eth.wait_for_transaction_receipt(tx_hash)
+        return receipt
+
+    # TODO: should this be multiple functions?
+    @supports([3])
+    def close_position(
+        self,
+        tokenId: int,
+        amount0Min: int = 0,
+        amount1Min: int = 0,
+        deadline: Optional[int] = None,
+    ) -> TxReceipt:
+        """
+        remove all liquidity from the position associated w/ tokenId, collect fees, and burn token.
+        """
+        position = self.nonFungiblePositionManager.functions.positions(tokenId).call()
+
+        if deadline is None:
+            deadline = self._deadline()
+
+        # If collecting fees in ETH, fees must be precomputed to protect against reentrancy
+        # source: https://docs.uniswap.org/sdk/guides/liquidity/removing
+
+        if position[2] == WETH9_ADDRESS or position[3] == WETH9_ADDRESS:
+            amount0Min, amount1Min = self.nonFungiblePositionManager.functions.collect(
+                (tokenId, _addr_to_str(self.address), MAX_UINT_128, MAX_UINT_128)
+            ).call()
+
+        tx_remove_liquidity = (
+            self.nonFungiblePositionManager.functions.decreaseLiquidity(
+                (tokenId, position[7], amount0Min, amount1Min, deadline)
+            ).transact({"from": _addr_to_str(self.address)})
+        )
+        self.w3.eth.wait_for_transaction_receipt(tx_remove_liquidity)
+
+        tx_collect_fees = self.nonFungiblePositionManager.functions.collect(
+            (tokenId, _addr_to_str(self.address), MAX_UINT_128, MAX_UINT_128)
+        ).transact({"from": _addr_to_str(self.address)})
+        self.w3.eth.wait_for_transaction_receipt(tx_collect_fees)
+
+        tx_burn = self.nonFungiblePositionManager.functions.burn(tokenId).transact(
+            {"from": _addr_to_str(self.address)}
+        )
+        receipt = self.w3.eth.wait_for_transaction_receipt(tx_burn)
+
+        return receipt
+
+    # Below two functions derived from: https://stackoverflow.com/questions/71814845/how-to-calculate-uniswap-v3-pools-total-value-locked-tvl-on-chain
+    def get_token0_in_pool(
+        self,
+        liquidity: float,
+        sqrtPrice: float,
+        sqrtPriceLow: float,
+        sqrtPriceHigh: float,
+    ) -> float:
+        sqrtPrice = max(min(sqrtPrice, sqrtPriceHigh), sqrtPriceLow)
+        return liquidity * (sqrtPriceHigh - sqrtPrice) / (sqrtPrice * sqrtPriceHigh)
+
+    def get_token1_in_pool(
+        self,
+        liquidity: float,
+        sqrtPrice: float,
+        sqrtPriceLow: float,
+        sqrtPriceHigh: float,
+    ) -> float:
+        sqrtPrice = max(min(sqrtPrice, sqrtPriceHigh), sqrtPriceLow)
+        return liquidity * (sqrtPrice - sqrtPriceLow)
+
+    #  Find maximum tick of the word at the largest index (wordPos) in the tickBitmap that contains an initialized tick
+    def get_max_tick_from_wordpos(
+        self, wordPos: int, bitmap: str, tick_spacing: int, fee: int
+    ) -> int:
+        compressed_tick = wordPos << 8
+        _tick = compressed_tick * tick_spacing
+        min_tick_in_word = nearest_tick(_tick, fee)
+        max_tick_in_word = min_tick_in_word + (len(bitmap) * tick_spacing)
+        return max_tick_in_word
+
+    # Find minimum tick of word at the smallest index (wordPos) in the tickBitmap that contains an initialized tick
+    def get_min_tick_from_wordpos(
+        self, wordPos: int, tick_spacing: int, fee: int
+    ) -> int:
+        compressed_tick = wordPos << 8
+        _tick = compressed_tick * tick_spacing
+        min_tick_in_word = nearest_tick(_tick, fee)
+        return min_tick_in_word
+
+    # Find min or max tick in initialized tick range using the tickBitmap
+    def find_tick_from_bitmap(
+        self,
+        bitmap_spacing: Tuple[int, int],
+        pool: Contract,
+        tick_spacing: int,
+        fee: int,
+        left: bool = True,
+    ) -> Union[int, bool]:
+        # searching to the left (finding max tick)
+        if left:
+            min_wordPos = bitmap_spacing[1]
+            max_wordPos = bitmap_spacing[0]
+            step = -1
+        # searching to the right (finding min tick)
+        else:
+            min_wordPos = bitmap_spacing[0]
+            max_wordPos = bitmap_spacing[1]
+            step = 1
+
+        # Some fun tickBitmap hacks below.
+        # Iterate thru each possible wordPos (based on tick_spacing), get the bitmap "word" (basically a sub-array of the full bitmap),
+        # check if there is an initialized tick, derive largest (or smallest) tick in this word
+        #
+        # Since wordPos (int16 index of tickBitmap mapping) are calculated by (tick/tickspacing) >> 8, deriving tick from wordPos
+        # is done by (wordPos << 8)*tickSpacing. This however does not find the precise tick (only a possible tick that could map to that bitmap sub-array, or word),
+        # thus we must calculate the nearest viable tick depending on the tick_spacing of the pool using nearest_tick().
+        # If searching for the maximum tick, we must then add-back len(bitmap)*tick_spacing as each bit in the bitmap should correspond to a tick.
+
+        for wordPos in range(min_wordPos, max_wordPos, step):
+            word = pool.functions.tickBitmap(wordPos).call()
+            bitmap = bin(word)
+            for bit in bitmap[3:]:
+                if int(bit) == 1:
+                    if left:
+                        _max_tick = self.get_max_tick_from_wordpos(
+                            wordPos, bitmap, tick_spacing, fee
+                        )
+                        return _max_tick
+                    else:
+                        _min_tick = self.get_min_tick_from_wordpos(
+                            wordPos, tick_spacing, fee
+                        )
+                        return _min_tick
+        return False
+
+    def get_tvl_in_pool(self, pool: Contract) -> Tuple[float, float]:
+        """
+        Iterate through each tick in a pool and calculate the TVL on-chain
+
+        Note: the output of this function may differ from what is returned by the
+        UniswapV3 subgraph api (https://github.com/Uniswap/v3-subgraph/issues/74)
+
+        Params
+        ------
+        pool: Contract
+            pool contract instance to find TVL
+        """
+        pool_tick_output_types = (
+            "uint128",
+            "int128",
+            "uint256",
+            "uint256",
+            "int56",
+            "uint160",
+            "uint32",
+            "bool",
+        )
+
+        pool_immutables = self.get_pool_immutables(pool)
+        pool_state = self.get_pool_state(pool)
+        fee = pool_immutables["fee"]
+        sqrtPrice = pool_state["sqrtPriceX96"] / (1 << 96)
+
+        token0_liquidity = 0.0
+        token1_liquidity = 0.0
+        liquidity_total = 0.0
+
+        TICK_SPACING = _tick_spacing[fee]
+        BITMAP_SPACING = _tick_bitmap_range[fee]
+
+        _max_tick = self.find_tick_from_bitmap(
+            BITMAP_SPACING, pool, TICK_SPACING, fee, True
+        )
+        _min_tick = self.find_tick_from_bitmap(
+            BITMAP_SPACING, pool, TICK_SPACING, fee, False
+        )
+        assert _max_tick is not False, "Error finding max tick"
+        assert _min_tick is not False, "Error finding min tick"
+
+        Batch = namedtuple("Batch", "ticks batchResults")
+        ticks = []
+        # Batching pool.functions.tick() calls as these are the major bottleneck to performance
+        for batch in list(chunks(range(_min_tick, _max_tick, TICK_SPACING), 100)):
+            _batch = []
+            _ticks = []
+            for tick in batch:
+                _batch.append(
+                    (
+                        pool.address,
+                        HexBytes(pool.functions.ticks(tick)._encode_transaction_data()),
+                    )
+                )
+                _ticks.append(tick)
+            ticks.append(Batch(_ticks, self.multicall(_batch, pool_tick_output_types)))
+
+        for tickBatch in ticks:
+            tick_arr = tickBatch.ticks
+            for i in range(len(tick_arr)):
+                tick = tick_arr[i]
+                tickData = tickBatch.batchResults[i]
+                # source: https://stackoverflow.com/questions/71814845/how-to-calculate-uniswap-v3-pools-total-value-locked-tvl-on-chain
+                liquidityNet = tickData[1]
+                liquidity_total += liquidityNet
+                sqrtPriceLow = 1.0001 ** (tick // 2)
+                sqrtPriceHigh = 1.0001 ** ((tick + TICK_SPACING) // 2)
+                token0_liquidity += self.get_token0_in_pool(
+                    liquidity_total, sqrtPrice, sqrtPriceLow, sqrtPriceHigh
+                )
+                token1_liquidity += self.get_token1_in_pool(
+                    liquidity_total, sqrtPrice, sqrtPriceLow, sqrtPriceHigh
+                )
+
+        # Correcting for each token's respective decimals
+        token0_decimals = (
+            _load_contract_erc20(self.w3, pool_immutables["token0"])
+            .functions.decimals()
+            .call()
+        )
+        token1_decimals = (
+            _load_contract_erc20(self.w3, pool_immutables["token1"])
+            .functions.decimals()
+            .call()
+        )
+        token0_liquidity = token0_liquidity // (10**token0_decimals)
+        token1_liquidity = token1_liquidity // (10**token1_decimals)
+        return (token0_liquidity, token1_liquidity)
+
     # ------ Approval Utils ------------------------------------------------------------
     def approve(self, token: AddressLike, max_approval: Optional[int] = None) -> None:
         """Give an exchange/router max approval of a token."""
         max_approval = self.max_approval_int if not max_approval else max_approval
         contract_addr = (
             self._exchange_address_from_token(token)
             if self.version == 1
@@ -1125,50 +1448,54 @@
 
     def _build_and_send_tx(
         self, function: ContractFunction, tx_params: Optional[TxParams] = None
     ) -> HexBytes:
         """Build and send a transaction."""
         if not tx_params:
             tx_params = self._get_tx_params()
-        transaction = function.buildTransaction(tx_params)
+        transaction = function.build_transaction(tx_params)
 
         if "gas" not in tx_params:
             # `use_estimate_gas` needs to be True for networks like Arbitrum (can't assume 250000 gas),
-            # but it breaks tests for unknown reasons because estimateGas takes forever on some tx's.
+            # but it breaks tests for unknown reasons because estimate_gas takes forever on some tx's.
             # Maybe an issue with ganache? (got GC warnings once...)
             if self.use_estimate_gas:
                 # The Uniswap V3 UI uses 20% margin for transactions
                 transaction["gas"] = Wei(
                     int(self.w3.eth.estimate_gas(transaction) * 1.2)
                 )
             else:
-                transaction["gas"] = Wei(250000)
+                transaction["gas"] = Wei(250_000)
 
         signed_txn = self.w3.eth.account.sign_transaction(
             transaction, private_key=self.private_key
         )
         # TODO: This needs to get more complicated if we want to support replacing a transaction
         # FIXME: This does not play nice if transactions are sent from other places using the same wallet.
         try:
             return self.w3.eth.send_raw_transaction(signed_txn.rawTransaction)
         finally:
             logger.debug(f"nonce: {tx_params['nonce']}")
             self.last_nonce = Nonce(tx_params["nonce"] + 1)
 
-    def _get_tx_params(self, value: Wei = Wei(0), gas: Wei = None) -> TxParams:
+    def _get_tx_params(
+        self, value: Wei = Wei(0), gas: Optional[Wei] = None
+    ) -> TxParams:
         """Get generic transaction parameters."""
         params: TxParams = {
             "from": _addr_to_str(self.address),
             "value": value,
             "nonce": max(
                 self.last_nonce, self.w3.eth.get_transaction_count(self.address)
             ),
         }
+
         if gas:
             params["gas"] = gas
+
         return params
 
     # ------ Price Calculation Utils ---------------------------------------------------
     def _calculate_max_input_token(
         self, input_token: AddressLike, qty: int, output_token: AddressLike
     ) -> Tuple[int, int]:
         """
@@ -1227,124 +1554,352 @@
         denominatorB = inputReserveB * 1000 + inputAmountB * 997
         outputAmountB = numeratorB / denominatorB
 
         return int(outputAmountB), int(1.2 * outputAmountA)
 
     # ------ Helpers ------------------------------------------------------------
 
+    # Batch contract function calls to speed up large on-chain data queries
+    def multicall(
+        self,
+        encoded_functions: Sequence[Tuple[ChecksumAddress, bytes]],
+        output_types: Sequence[str],
+    ) -> List[Any]:
+        """
+        Calls aggregate() on Uniswap Multicall2 contract
+
+        Params
+        ------
+        encoded_functions : Sequence[Tuple[ChecksumAddress, bytes]]
+            array of tuples containing address of contract and byte-encoded transaction data
+
+        output_types: Sequence[str]
+            array of solidity output types for decoding (e.g. uint256, bool, etc.)
+
+        returns decoded results
+        """
+        params = [
+            {"target": target, "callData": callData}
+            for target, callData in encoded_functions
+        ]
+        _, results = self.multicall2.functions.aggregate(params).call(
+            block_identifier="latest"
+        )
+        decoded_results = [
+            self.w3.codec.decode(output_types, multicall_result)
+            for multicall_result in results
+        ]
+        normalized_results = [
+            map_abi_data(BASE_RETURN_NORMALIZERS, output_types, decoded_result)
+            for decoded_result in decoded_results
+        ]
+        return normalized_results
+
     def get_token(self, address: AddressLike, abi_name: str = "erc20") -> ERC20Token:
         """
         Retrieves metadata from the ERC20 contract of a given token, like its name, symbol, and decimals.
         """
         # FIXME: This function should always return the same output for the same input
         #        and would therefore benefit from caching
+        if address == "0x0000000000000000000000000000000000000000":
+            # This isn't exactly right, but for all intents and purposes,
+            # ETH is treated as a ERC20 by Uniswap.
+            return ERC20Token(
+                address=address,
+                name="ETH",
+                symbol="ETH",
+                decimals=18,
+            )
         token_contract = _load_contract(self.w3, abi_name, address=address)
         try:
             _name = token_contract.functions.name().call()
             _symbol = token_contract.functions.symbol().call()
             decimals = token_contract.functions.decimals().call()
         except Exception as e:
             logger.warning(
                 f"Exception occurred while trying to get token {_addr_to_str(address)}: {e}"
             )
             raise InvalidToken(address)
         try:
             name = _name.decode()
-        except:
+        except Exception:
             name = _name
         try:
             symbol = _symbol.decode()
-        except:
+        except Exception:
             symbol = _symbol
         return ERC20Token(symbol, address, name, decimals)
 
     @functools.lru_cache()
     @supports([2, 3])
     def get_weth_address(self) -> ChecksumAddress:
         """Retrieves the WETH address from the contracts (which may vary between chains)."""
         if self.version == 2:
             # Contract calls should always return checksummed addresses
             address: ChecksumAddress = self.router.functions.WETH().call()
         elif self.version == 3:
             address = self.router.functions.WETH9().call()
+        else:
+            raise ValueError  # pragma: no cover
+
+        # Mainnet WETH9 address
+        # WETH9_ADDRESS = "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"
+        # assert address == WETH9_ADDRESS, "WETH address mismatch"
+
         return address
 
+    @supports([3])
+    def get_pool_instance(
+        self, token_0: AddressLike, token_1: AddressLike, fee: int = 3_000
+    ) -> Contract:
+        """
+        Returns an instance of a pool contract for a given token pair and fee.
+        Requires pair [token_in, token_out, fee] has a direct pool.
+        Will return 0x0 address if pool does not exist.
+        """
+
+        assert token_0 != token_1, "Token addresses cannot be the same"
+        fee = validate_fee_tier(fee=fee, version=self.version)
+
+        pool_address = self.factory_contract.functions.getPool(
+            token_0, token_1, fee
+        ).call()
+        assert pool_address != ETH_ADDRESS, "0 address returned. Pool does not exist"
+        pool_instance = _load_contract(
+            self.w3, abi_name="uniswap-v3/pool", address=pool_address
+        )
+
+        return pool_instance
+
+    @supports([3])
+    def create_pool_instance(
+        self, token_0: AddressLike, token_1: AddressLike, fee: int = 3_000
+    ) -> Contract:
+        """
+        Creates and returns UniswapV3 Pool instance. Requires that fee is valid and no similar pool already exists.
+        """
+        address = _addr_to_str(self.address)
+        assert token_0 != token_1, "Token addresses cannot be the same"
+        fee = validate_fee_tier(fee=fee, version=self.version)
+
+        tx = self.factory_contract.functions.createPool(token_0, token_1, fee).transact(
+            {"from": address}
+        )
+        receipt = self.w3.eth.wait_for_transaction_receipt(tx)
+
+        event_logs = self.factory_contract.events.PoolCreated().process_receipt(receipt)
+        pool_address = event_logs[0]["args"]["pool"]
+        pool_instance = _load_contract(
+            self.w3, abi_name="uniswap-v3/pool", address=pool_address
+        )
+
+        return pool_instance
+
+    @supports([3])
+    def get_pool_immutables(self, pool: Contract) -> Dict:
+        """
+        Fetch on-chain pool data.
+        """
+        pool_immutables = {
+            "factory": pool.functions.factory().call(),
+            "token0": pool.functions.token0().call(),
+            "token1": pool.functions.token1().call(),
+            "fee": pool.functions.fee().call(),
+            "tickSpacing": pool.functions.tickSpacing().call(),
+            "maxLiquidityPerTick": pool.functions.maxLiquidityPerTick().call(),
+        }
+
+        return pool_immutables
+
+    @supports([3])
+    def get_pool_state(self, pool: Contract) -> Dict:
+        """
+        Fetch on-chain pool state.
+        """
+        liquidity = pool.functions.liquidity().call()
+        slot = pool.functions.slot0().call()
+        pool_state = {
+            "liquidity": liquidity,
+            "sqrtPriceX96": slot[0],
+            "tick": slot[1],
+            "observationIndex": slot[2],
+            "observationCardinality": slot[3],
+            "observationCardinalityNext": slot[4],
+            "feeProtocol": slot[5],
+            "unlocked": slot[6],
+        }
+
+        return pool_state
+
+    @supports([3])
+    def get_liquidity_positions(self) -> List[int]:
+        """
+        Enumerates liquidity position tokens owned by address.
+        Returns array of token IDs.
+        """
+        positions: List[int] = []
+        number_of_positions = self.nonFungiblePositionManager.functions.balanceOf(
+            _addr_to_str(self.address)
+        ).call()
+        if number_of_positions > 0:
+            for idx in range(number_of_positions):
+                position = (
+                    self.nonFungiblePositionManager.functions.tokenOfOwnerByIndex(
+                        _addr_to_str(self.address), idx
+                    ).call()
+                )
+                positions.append(position)
+        return positions
+
+    # FIXME: mint call reverting - likely to do w/ passing struct args to contract function call
+    # FIXME: mint call reverting - likely due to handling of token amounts
+
+    @supports([3])
+    def mint_position(self, pool: Contract, amount0: int, amount1: int) -> HexBytes:
+        pool_immutables = self.get_pool_immutables(pool)
+
+        token0 = pool_immutables["token0"]
+        token1 = pool_immutables["token1"]
+        fee = pool_immutables["fee"]
+
+        positionManager = self.nonFungiblePositionManager
+
+        approve0 = _load_contract_erc20(self.w3, token0).functions.approve(
+            self.positionManager_addr, amount0
+        )
+        logger.warning(f"Approving {_addr_to_str(token0)}...")
+        tx0 = self._build_and_send_tx(approve0)
+        self.w3.eth.wait_for_transaction_receipt(tx0, timeout=6000)
+
+        approve1 = _load_contract_erc20(self.w3, token1).functions.approve(
+            self.positionManager_addr, amount1 * 1000
+        )
+        logger.warning(f"Approving {_addr_to_str(token1)}...")
+        tx1 = self._build_and_send_tx(approve1)
+        self.w3.eth.wait_for_transaction_receipt(tx1, timeout=6000)
+
+        # tx_mint = pool.functions.mint(self.address, MIN_TICK, MAX_TICK, amount0,'').transact();
+
+        position = positionManager.encodeABI(
+            fn_name="mint",
+            args=[
+                {
+                    "token0": token0,
+                    "token1": token1,
+                    "fee": fee,
+                    "tickLower": MIN_TICK,
+                    "tickUpper": MAX_TICK,
+                    "amount0Desired": amount0,
+                    "amount1Desired": amount1,
+                    "amount0Min": 0,
+                    "amount1Min": 0,
+                    "recipient": _addr_to_str(self.address),
+                    "deadline": self._deadline(),
+                }
+            ],
+        )
+        print(position)
+
+        multicall = positionManager.functions.multicall([position]).transact(
+            {"from": _addr_to_str(self.address), "gas": Wei(417918)}
+        )
+
+        print(multicall)
+        # mint_position = positionManager.functions.mint({'token0':token0,'token1':token1,'fee':fee,'tickLower':MIN_TICK,'tickUpper':MAX_TICK,
+        # 'amount0Desired':amount0,'amount1Desired':amount1,'amount0Min':0,'amount1Min':0,'recipient':_addr_to_str(self.address),'deadline':self._deadline()
+        # })
+
+        # mint_tx = self._build_and_send_tx(mint_position)
+        # self.w3.eth.wait_for_transaction_receipt(mint_tx, timeout=6000)
+        #
+        # tx2 = self._build_and_send_tx(multicall,)
+        # self.w3.eth.wait_for_transaction_receipt(tx2, timeout=6000)
+
+        # position = positionManager.functions.mint().buildTransaction()
+        # print(position['data'])
+
+        return multicall
+
     @supports([2, 3])
     def get_raw_price(
-        self, token_in: AddressLike, token_out: AddressLike, fee: int = 3000
+        self, token_in: AddressLike, token_out: AddressLike, fee: Optional[int] = None
     ) -> float:
-        """Returns current price for pair of tokens [token_in, token_out] regrading liquidity that is being locked in the pool"""
-        """Parameter `fee` is required for V3 only, can be omitted for V2"""
-        """Requires pair [token_in, token_out] having direct pool"""
+        """
+        Returns current price for pair of tokens [token_in, token_out] regrading liquidity that is being locked in the pool
+        Parameter `fee` is required for V3 only, can be omitted for V2
+        Requires pair [token_in, token_out] having direct pool
+        """
+        fee = validate_fee_tier(fee=fee, version=self.version)
+
         if token_in == ETH_ADDRESS:
             token_in = self.get_weth_address()
         if token_out == ETH_ADDRESS:
             token_out = self.get_weth_address()
 
         if self.version == 2:
-            params: Iterable[Union[ChecksumAddress,Optional[int]]] = [
-                self.w3.toChecksumAddress(token_in),
-                self.w3.toChecksumAddress(token_out),
+            params: Iterable[Union[ChecksumAddress, Optional[int]]] = [
+                self.w3.to_checksum_address(token_in),
+                self.w3.to_checksum_address(token_out),
             ]
             pair_token = self.factory_contract.functions.getPair(*params).call()
             token_in_erc20 = _load_contract_erc20(
-                self.w3, self.w3.toChecksumAddress(token_in)
+                self.w3, self.w3.to_checksum_address(token_in)
             )
             token_in_balance = int(
                 token_in_erc20.functions.balanceOf(
-                    self.w3.toChecksumAddress(pair_token)
+                    self.w3.to_checksum_address(pair_token)
                 ).call()
             )
             token_in_decimals = self.get_token(token_in).decimals
-            token_in_balance = token_in_balance / (10 ** token_in_decimals)
+            token_in_balance = token_in_balance / (10**token_in_decimals)
 
             token_out_erc20 = _load_contract_erc20(
-                self.w3, self.w3.toChecksumAddress(token_out)
+                self.w3, self.w3.to_checksum_address(token_out)
             )
             token_out_balance = int(
                 token_out_erc20.functions.balanceOf(
-                    self.w3.toChecksumAddress(pair_token)
+                    self.w3.to_checksum_address(pair_token)
                 ).call()
             )
             token_out_decimals = self.get_token(token_out).decimals
-            token_out_balance = token_out_balance / (10 ** token_out_decimals)
+            token_out_balance = token_out_balance / (10**token_out_decimals)
 
             raw_price = token_out_balance / token_in_balance
         else:
             params = [
-                self.w3.toChecksumAddress(token_in),
-                self.w3.toChecksumAddress(token_out),
+                self.w3.to_checksum_address(token_in),
+                self.w3.to_checksum_address(token_out),
                 fee,
             ]
             pool_address = self.factory_contract.functions.getPool(*params).call()
             pool_contract = _load_contract(
                 self.w3, abi_name="uniswap-v3/pool", address=pool_address
             )
-            t0 = pool_contract.functions.token0().call()
+            # t0 = pool_contract.functions.token0().call()
             t1 = pool_contract.functions.token1().call()
             if t1.lower() == token_in.lower():
                 den0 = self.get_token(token_in).decimals
                 den1 = self.get_token(token_out).decimals
             else:
                 den0 = self.get_token(token_out).decimals
                 den1 = self.get_token(token_in).decimals
             sqrtPriceX96 = pool_contract.functions.slot0().call()[0]
-            raw_price = (sqrtPriceX96 * sqrtPriceX96 * 10 ** den1 >> (96 * 2)) / (
-                10 ** den0
+            raw_price = (sqrtPriceX96 * sqrtPriceX96 * 10**den1 >> (96 * 2)) / (
+                10**den0
             )
             if t1.lower() == token_in.lower():
                 raw_price = 1 / raw_price
         return raw_price
 
     def estimate_price_impact(
         self,
         token_in: AddressLike,
         token_out: AddressLike,
         amount_in: int,
-        fee: int = None,
+        fee: int,
         route: Optional[List[AddressLike]] = None,
     ) -> float:
         """
         Returns the estimated price impact as a positive float (0.01 = 1%).
 
         NOTE: Work-in-progress.
 
@@ -1372,41 +1927,34 @@
             # ContractLogicError is raised when the pool's contract for given `(token_in, token_out, fee)` hasn't been deployed.
             # As `get_price_input()` uses UniswapV3Quoter for getting prices, that contract raises such exception in this situation.
             return 1
         price_amount = (
             cost_amount / (amount_in / (10 ** self.get_token(token_in).decimals))
         ) / 10 ** self.get_token(token_out).decimals
 
-        return float((price_small - price_amount) / price_small)
+        # calculate and subtract the realised fees from the price impact. See:
+        # https://github.com/uniswap-python/uniswap-python/issues/310
+        # The fee calculation will need to be updated when adding support for the AutoRouter.
+        price_impact_with_fees = float((price_small - price_amount) / price_small)
+        fee_realised_percentage = realised_fee_percentage(fee, amount_in)
+        price_impact_real = price_impact_with_fees - fee_realised_percentage
+
+        return price_impact_real
 
     # ------ Exchange ------------------------------------------------------------------
     @supports([1, 2])
     def get_fee_maker(self) -> float:
         """Get the maker fee."""
         return 0
 
     @supports([1, 2])
     def get_fee_taker(self) -> float:
         """Get the taker fee."""
         return 0.003
 
-    # ------ Test utilities ------------------------------------------------------------
-
-    def _get_token_addresses(self) -> Dict[str, ChecksumAddress]:
-        """
-        Returns a dict with addresses for tokens for the current net.
-        Used in testing.
-        """
-        if self.netname == "mainnet":
-            return tokens
-        elif self.netname == "rinkeby":
-            return tokens_rinkeby
-        else:
-            raise Exception(f"Unknown net '{self.netname}'")
-
     # ---- Old v1 utils ----
 
     @supports([1])
     def _exchange_address_from_token(self, token_addr: AddressLike) -> AddressLike:
         ex_addr: AddressLike = self.factory_contract.functions.getExchange(
             token_addr
         ).call()
@@ -1422,15 +1970,17 @@
             .call()
         )
         return token_addr
 
     @functools.lru_cache()
     @supports([1])
     def _exchange_contract(
-        self, token_addr: AddressLike = None, ex_addr: AddressLike = None
+        self,
+        token_addr: Optional[AddressLike] = None,
+        ex_addr: Optional[AddressLike] = None,
     ) -> Contract:
         if not ex_addr and token_addr:
             ex_addr = self._exchange_address_from_token(token_addr)
         if ex_addr is None:
             raise InvalidToken(token_addr)
         abi_name = "uniswap-v1/exchange"
         contract = _load_contract(self.w3, abi_name=abi_name, address=ex_addr)
```

### Comparing `uniswap_python_route-0.5.5.5/PKG-INFO` & `uniswap_python_route-0.7.2/PKG-INFO`

 * *Files 14% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: uniswap-python-route
-Version: 0.5.5.5
+Version: 0.7.2
 Summary: An unofficial Python wrapper for the decentralized exchange Uniswap
 Home-page: https://github.com/starascendin/uniswap-python
 License: MIT
 Keywords: uniswap,ethereum,exchange,trading
 Author: Shane Fontaine
 Author-email: shane6fontaine@gmail.com
 Requires-Python: >=3.7.2,<4.0.0
@@ -13,18 +13,20 @@
 Classifier: Intended Audience :: Information Technology
 Classifier: License :: OSI Approved :: MIT License
 Classifier: Programming Language :: Python :: 3
 Classifier: Programming Language :: Python :: 3.8
 Classifier: Programming Language :: Python :: 3.9
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
+Classifier: Programming Language :: Python :: 3.12
 Classifier: Topic :: Software Development :: Libraries :: Python Modules
 Requires-Dist: click (>=8.0.3,<9.0.0)
 Requires-Dist: python-dotenv
-Requires-Dist: web3 (>=5.23.0,<6.0.0)
+Requires-Dist: typing-extensions
+Requires-Dist: web3 (>=6.0,<7.0)
 Project-URL: Repository, https://github.com/starascendin/uniswap-python
 Description-Content-Type: text/markdown
 
 <p align="center">
   <img width="350" height="350" src="https://user-images.githubusercontent.com/9441295/107376524-d96b5880-6a9e-11eb-9eba-094c439cfb07.png">
 </p>
 
@@ -33,22 +35,25 @@
 [![GitHub Actions](https://github.com/shanefontaine/uniswap-python/workflows/Test/badge.svg)](https://github.com/shanefontaine/uniswap-python/actions)
 [![codecov](https://codecov.io/gh/uniswap-python/uniswap-python/branch/master/graph/badge.svg?token=VHAZHHLFX8)](https://codecov.io/gh/uniswap-python/uniswap-python)
 [![Downloads](https://pepy.tech/badge/uniswap-python)](https://pepy.tech/project/uniswap-python)
 [![License](http://img.shields.io/badge/license-MIT-blue.svg)](https://raw.githubusercontent.com/shanefontaine/uniswap-python/master/LICENSE)
 [![PyPI](https://img.shields.io/pypi/v/uniswap-python)](https://pypi.org/project/uniswap-python/)
 [![Typechecking: Mypy](http://www.mypy-lang.org/static/mypy_badge.svg)](http://mypy-lang.org/)
 [![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/ambv/black)
+[![GitPOAP Badge](https://public-api.gitpoap.io/v1/repo/uniswap-python/uniswap-python/badge)](https://www.gitpoap.io/gh/uniswap-python/uniswap-python)
 
 [![GitHub Repo stars](https://img.shields.io/github/stars/uniswap-python/uniswap-python?style=social)](https://github.com/uniswap-python/uniswap-python/stargazers)
 [![Twitter Follow](https://img.shields.io/twitter/follow/UniswapPython?label=Follow&style=social)](https://twitter.com/UniswapPython)
 
 The unofficial Python client for [Uniswap](https://uniswap.io/).
 
 Documentation is available at https://uniswap-python.com/
 
+**Want to help implement support for Uniswap v4?** See [issue #337](https://github.com/uniswap-python/uniswap-python/issues/337)
+
 ## Functionality
 
 *  A simple to use Python wrapper for all available contract functions and variables
 *  A basic CLI to get prices and token metadata
 *  Simple parsing of data returned from the Uniswap contract
 
 ### Supports
@@ -91,16 +96,35 @@
 * [Shane Fontaine](https://twitter.com/shanecoin)
 * [Erik Bjäreholt](https://twitter.com/ErikBjare)
 * [@liquid-8](https://github.com/liquid-8)
 * ...and [others](https://github.com/uniswap-python/uniswap-python/graphs/contributors)
 
 *Want to help out with development? We have funding to those that do! See [#181](https://github.com/uniswap-python/uniswap-python/discussions/181)*
 
+Contributors also earn this beautiful [GitPOAP](https://gitpoap.notion.site/What-s-a-GitPOAP-5b085daac4b4429994b5231be028b3d9) for their contributions!
+
+<a href="https://www.gitpoap.io/gh/uniswap-python/uniswap-python">
+  <img src="https://assets.poap.xyz/gitpoap-2022-uniswap-python-contributor-2022-logo-1664825191444.png" width="256px">
+</a>
+
 ## Changelog
 
+_0.7.2_
+
+* Updated: Default fee is not applied when using Uniswap V3. Default fee for Uniswap V1 and V2 is still 0.3%.
+* Updated: `InvalidFeeTier` exception is raised when a tier is not supported by the protocol version. See all supported tiers in [`uniswap.fee.FeeTier`](./uniswap/fee.py#L12)
+
+_0.7.1_
+
+* incomplete changelog
+
+_0.7.0_
+
+* incomplete changelog
+
 _0.5.4_
 
 * added use of gas estimation instead of a fixed gas limit (to support Arbitrum)
 * added `use_estimate_gas` constructor argument (used in testing)
 * added constants/basic support for Arbitrum, Optimism, Polygon, and Fantom. (untested)
 * incomplete changelog
```

